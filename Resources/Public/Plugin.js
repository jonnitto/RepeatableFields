(()=>{var ur=Object.create;var Xt=Object.defineProperty;var dr=Object.getOwnPropertyDescriptor;var fr=Object.getOwnPropertyNames;var pr=Object.getPrototypeOf,hr=Object.prototype.hasOwnProperty;var gr=(e,n)=>()=>(e&&(n=e(e=0)),n);var se=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var mr=(e,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of fr(n))!hr.call(e,i)&&i!==r&&Xt(e,i,{get:()=>n[i],enumerable:!(o=dr(n,i))||o.enumerable});return e};var j=(e,n,r)=>(r=e!=null?ur(pr(e)):{},mr(n||!e||!e.__esModule?Xt(r,"default",{value:e,enumerable:!0}):r,e));function Y(e){return(...n)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${e}`])return window["@Neos:HostPluginAPI"][`@${e}`](...n);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var q=gr(()=>{});var le=se((ko,Yt)=>{q();Yt.exports=Y("vendor")().React});var Ft=se((Bo,Ht)=>{q();Ht.exports=Y("vendor")().reactRedux});var Re=se((Do,Vt)=>{q();Vt.exports=Y("vendor")().PropTypes});var _t=se((Ho,Jt)=>{q();Jt.exports=Y("NeosProjectPackages")().NeosUiReduxStore});var Ke=se((Vo,Qt)=>{q();Qt.exports=Y("NeosProjectPackages")().NeosUiDecorators});var mt=se((Uo,$t)=>{q();$t.exports=Y("NeosProjectPackages")().ReactUiComponents});var fn=se((Bi,dn)=>{q();dn.exports=Y("vendor")().ReactDOM});var hn=se((Pi,pn)=>{"use strict";var Ir=function(e,n,r,o,i,s,l,t){if(!e){var u;if(n===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[r,o,i,s,l,t],c=0;u=new Error(n.replace(/%s/g,function(){return a[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};pn.exports=Ir});q();var jt=Y("manifest");var E=j(le()),Qn=j(Ft()),T=j(Re());var zt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Ut=(e=21)=>{let n="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)n+=zt[r[e]&63];return n};function Zt(e){var n,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(r=Zt(e[n]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function br(){for(var e,n,r=0,o="",i=arguments.length;r<i;r++)(e=arguments[r])&&(n=Zt(e))&&(o&&(o+=" "),o+=n);return o}var Kt=br;var Fe=j(_t()),$n=j(Ke()),ae=j(mt());q();var qt=Y("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:Ko}=Y("NeosProjectPackages")().NeosUiBackendConnector;var vr=(e,n="position",r="key")=>{let o=typeof n=="string"?m=>m[n]:n,i={},s={},l={},t={},u={},a={};e.forEach((m,S)=>{let w=m[r]?m[r]:String(S);i[w]=S;let I=o(m),A=String(I||S),L=!1;if(A.startsWith("start")){let h=A.match(/start\s+(\d+)/),G=h&&h[1]?Number(h[1]):0;l[G]||(l[G]=[]),l[G].push(w)}else if(A.startsWith("end")){let h=A.match(/end\s+(\d+)/),G=h&&h[1]?Number(h[1]):0;t[G]||(t[G]=[]),t[G].push(w)}else if(A.startsWith("before")){let h=A.match(/before\s+(\S+)(\s+(\d+))?/);if(!h)L=!0;else{let G=h[1],C=h[3]?Number(h[3]):0;u[G]||(u[G]={}),u[G][C]||(u[G][C]=[]),u[G][C].push(w)}}else if(A.startsWith("after")){let h=A.match(/after\s+(\S+)(\s+(\d+))?/);if(!h)L=!0;else{let G=h[1],C=h[3]?Number(h[3]):0;a[G]||(a[G]={}),a[G][C]||(a[G][C]=[]),a[G][C].push(w)}}else L=!0;if(L){let h=parseFloat(A);(isNaN(h)||!isFinite(h))&&(h=S),s[h]||(s[h]=[]),s[h].push(w)}});let c=[],d=[],f=[],p=[],b=(m,S)=>{let w=Object.keys(m).map(I=>Number(I)).sort((I,A)=>I-A);return S?w:w.reverse()},v=(m,S)=>{m.forEach(w=>{if(!(p.indexOf(w)>=0)){if(p.push(w),u[w]){let I=b(u[w],!0);for(let A of I)v(u[w][A],S)}if(S.push(w),a[w]){let I=b(a[w],!1);for(let A of I)v(a[w][A],S)}}})};for(let m of b(l,!1))v(l[m],c);for(let m of b(s,!0))v(s[m],d);for(let m of b(t,!0))v(t[m],f);for(let m of Object.keys(u))if(!(p.indexOf(m)>=0))for(let S of b(u[m],!1))v(u[m][S],c);for(let m of Object.keys(a))if(!(p.indexOf(m)>=0))for(let S of b(a[m],!1))v(a[m][S],d);return[...c,...d,...f].map(m=>i[m]).map(m=>e[m])},en=vr;var ce=j(le());var te=j(le());function tn({style:e,className:n,size:r=30}){return te.default.createElement("svg",{width:r,height:r,stroke:"currentColor",viewBox:"0 0 24 24",style:e,className:n},te.default.createElement("g",null,te.default.createElement("circle",{cx:"12",cy:"12",r:"9.5",fill:"none","stroke-width":"2","stroke-linecap":"round"},[{attribute:"dasharray",values:"0 150;42 150;42 150;42 150"},{attribute:"dashoffset",values:"0;-16;-59;-59"}].map(({attribute:o,values:i})=>te.default.createElement("animate",{key:o,attributeName:`stroke-${o}`,values:i,dur:"1.5s",calcMode:"spline",keyTimes:"0;0.475;0.95;1",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1",repeatCount:"indefinite"}))),te.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"2s",values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}function nn({style:e,className:n,size:r=30}){return te.default.createElement("svg",{width:r*2,height:r,viewBox:"0 0 24 12",class:n,style:e},[1,2,3].map(o=>{let i=o*6,s=Math.round(100/3*(o-1))/100;return te.default.createElement("circle",{cx:i,cy:"6",r:"0",fill:"currentColor"},te.default.createElement("animate",{attributeName:"r",begin:s,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))}))}var rn=j(Ke()),yt={container:(e=1)=>({display:"grid",gridTemplate:"'content' 1fr / 1fr",alignItems:"center",justifyItems:"center",width:"100%",minHeight:`calc(var(--spacing-GoldenUnit) * ${e})`}),item:(e=!1)=>({gridArea:"content",transition:"opacity var(--transition-Default), transform var(--transition-Default) ease",opacity:e?1:0,transform:`scale(${e?1:0})`})};function xr({id:e,title:n="Neos.Neos:Main:loading",isLoading:r=!1,delayTime:o=500,timeoutTime:i=5e3,i18nRegistry:s,heightMultiplier:l=1,width:t=60}){let[u,a]=(0,ce.useState)(0),c=n?s.translate(n):null;return(0,ce.useEffect)(()=>{if(!r){a(0);return}let d=setTimeout(()=>{a(1)},o),f=setTimeout(()=>{a(2)},o+i);return()=>{clearTimeout(d),clearTimeout(f)}},[r]),r?ce.default.createElement("div",{id:e,style:yt.container(l),title:c},ce.default.createElement(tn,{size:t/2,style:yt.item(u==1)}),ce.default.createElement(nn,{size:t/2,style:yt.item(u==2)})):null}var wr=(0,rn.neos)(e=>({i18nRegistry:e.get("i18n")})),on=wr(xr);var Q=j(le());function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ae.apply(null,arguments)}function an(e){if(Array.isArray(e))return e}function sn(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,i,s,l,t=[],u=!0,a=!1;try{if(s=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=s.call(r)).done)&&(t.push(o.value),t.length!==n);u=!0);}catch(c){a=!0,i=c}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(a)throw i}}return t}}function Be(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=Array(n);r<n;r++)o[r]=e[r];return o}function Je(e,n){if(e){if(typeof e=="string")return Be(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Be(e,n):void 0}}function ln(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(e,n){return an(e)||sn(e,n)||Je(e,n)||ln()}function ne(e){"@babel/helpers - typeof";return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ne(e)}function cn(e,n){if(ne(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,n||"default");if(ne(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function _e(e){var n=cn(e,"string");return ne(n)=="symbol"?n:n+""}function N(e,n,r){return(n=_e(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Qe(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&o.push.apply(o,Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),o.forEach(function(i){N(e,i,r[i])})}return e}function Se(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function un(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_e(o.key),o)}}function Oe(e,n,r){return n&&un(e.prototype,n),r&&un(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e(e,n){if(n&&(ne(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Te(e)}function qe(e,n){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},qe(e,n)}function et(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&qe(e,n)}var z=j(le()),ot=j(fn()),ue=j(hn());function gn(e){if(Array.isArray(e))return Be(e)}function mn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bn(e){return gn(e)||mn(e)||Je(e)||yn()}var x=j(Re()),Cr=(function(){function e(){Se(this,e),N(this,"refs",{})}return Oe(e,[{key:"add",value:function(r,o){this.refs[r]||(this.refs[r]=[]),this.refs[r].push(o)}},{key:"remove",value:function(r,o){var i=this.getIndex(r,o);i!==-1&&this.refs[r].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var r=this;return this.refs[this.active.collection].find(function(o){var i=o.node;return i.sortableInfo.index==r.active.index})}},{key:"getIndex",value:function(r,o){return this.refs[r].indexOf(o)}},{key:"getOrderedRefs",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[r].sort(Ar)}}]),e})();function Ar(e,n){var r=e.node.sortableInfo.index,o=n.node.sortableInfo.index;return r-o}function In(e,n){return Object.keys(e).reduce(function(r,o){return n.indexOf(o)===-1&&(r[o]=e[o]),r},{})}var Ee={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},Cn=(function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],n=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1];return n==="ms"?"ms":n&&n.length?n[0].toUpperCase()+n.substr(1):""})();function tt(e,n){Object.keys(n).forEach(function(r){e.style[r]=n[r]})}function nt(e,n){e.style["".concat(Cn,"Transform")]=n==null?"":"translate3d(".concat(n.x,"px,").concat(n.y,"px,0)")}function vt(e,n){e.style["".concat(Cn,"TransitionDuration")]=n==null?"":"".concat(n,"ms")}function De(e,n){for(;e;){if(n(e))return e;e=e.parentNode}return null}function vn(e,n,r){return Math.max(e,Math.min(r,n))}function Ge(e){return e.substr(-2)==="px"?parseFloat(e):0}function Sr(e){var n=window.getComputedStyle(e);return{bottom:Ge(n.marginBottom),left:Ge(n.marginLeft),right:Ge(n.marginRight),top:Ge(n.marginTop)}}function wt(e,n){var r=n.displayName||n.name;return r?"".concat(e,"(").concat(r,")"):e}function xt(e,n){var r=e.getBoundingClientRect();return{top:r.top+n.top,left:r.left+n.left}}function Pe(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function Or(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function rt(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(e){var o={left:r.left+e.offsetLeft,top:r.top+e.offsetTop};return e.parentNode===n?o:rt(e.parentNode,n,o)}}function Tr(e,n,r){return e<r&&e>n?e-1:e>r&&e<n?e+1:e}function xn(e){var n=e.lockOffset,r=e.width,o=e.height,i=n,s=n,l="px";if(typeof n=="string"){var t=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(n);(0,ue.default)(t!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',n),i=parseFloat(n),s=parseFloat(n),l=t[1]}return(0,ue.default)(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",n),l==="%"&&(i=i*r/100,s=s*o/100),{x:i,y:s}}function Er(e){var n=e.height,r=e.width,o=e.lockOffset,i=Array.isArray(o)?o:[o,o];(0,ue.default)(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var s=bt(i,2),l=s[0],t=s[1];return[xn({height:n,lockOffset:l,width:r}),xn({height:n,lockOffset:t,width:r})]}function Gr(e){var n=window.getComputedStyle(e),r=/(auto|scroll)/,o=["overflow","overflowX","overflowY"];return o.find(function(i){return r.test(n[i])})}function An(e){return e instanceof HTMLElement?Gr(e)?e:An(e.parentNode):null}function Nr(e){var n=window.getComputedStyle(e);return n.display==="grid"?{x:Ge(n.gridColumnGap),y:Ge(n.gridRowGap)}:{x:0,y:0}}var me={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},ye={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Wr(e){var n="input, textarea, select, canvas, [contenteditable]",r=e.querySelectorAll(n),o=e.cloneNode(!0),i=bn(o.querySelectorAll(n));return i.forEach(function(s,l){if(s.type!=="file"&&(s.value=r[l].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===ye.Canvas&&r[l].width>0&&r[l].height>0){var t=s.getContext("2d");t.drawImage(r[l],0,0)}}),o}function Sn(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=(function(i){et(s,i);function s(){var l,t;Se(this,s);for(var u=arguments.length,a=new Array(u),c=0;c<u;c++)a[c]=arguments[c];return t=$e(this,(l=Te(s)).call.apply(l,[this].concat(a))),N(O(O(t)),"wrappedInstance",(0,z.createRef)()),t}return Oe(s,[{key:"componentDidMount",value:function(){var t=(0,ot.findDOMNode)(this);t.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return(0,ue.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,z.createElement)(e,Ae({ref:t},this.props))}}]),s})(z.Component),N(n,"displayName",wt("sortableHandle",e)),r}function wn(e){return e.sortableHandle!=null}var kr=(function(){function e(n,r){Se(this,e),this.container=n,this.onScrollCallback=r}return Oe(e,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(r){var o=this,i=r.translate,s=r.minTranslate,l=r.maxTranslate,t=r.width,u=r.height,a={x:0,y:0},c={x:1,y:1},d={x:10,y:10},f=this.container,p=f.scrollTop,b=f.scrollLeft,v=f.scrollHeight,R=f.scrollWidth,m=f.clientHeight,S=f.clientWidth,w=p===0,I=v-p-m===0,A=b===0,L=R-b-S===0;i.y>=l.y-u/2&&!I?(a.y=1,c.y=d.y*Math.abs((l.y-u/2-i.y)/u)):i.x>=l.x-t/2&&!L?(a.x=1,c.x=d.x*Math.abs((l.x-t/2-i.x)/t)):i.y<=s.y+u/2&&!w?(a.y=-1,c.y=d.y*Math.abs((i.y-u/2-s.y)/u)):i.x<=s.x+t/2&&!A&&(a.x=-1,c.x=d.x*Math.abs((i.x-t/2-s.x)/t)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(a.x!==0||a.y!==0)&&(this.interval=setInterval(function(){o.isAutoScrolling=!0;var h={left:c.x*a.x,top:c.y*a.y};o.container.scrollTop+=h.top,o.container.scrollLeft+=h.left,o.onScrollCallback(h)},5))}}]),e})();function Rr(e){var n=e.node;return{height:n.offsetHeight,width:n.offsetWidth}}function Br(e){var n=[ye.Input,ye.Textarea,ye.Select,ye.Option,ye.Button];return!!(n.indexOf(e.target.tagName)!==-1||De(e.target,function(r){return r.contentEditable==="true"}))}var On={axis:x.default.oneOf(["x","y","xy"]),contentWindow:x.default.any,disableAutoscroll:x.default.bool,distance:x.default.number,getContainer:x.default.func,getHelperDimensions:x.default.func,helperClass:x.default.string,helperContainer:x.default.oneOfType([x.default.func,typeof HTMLElement>"u"?x.default.any:x.default.instanceOf(HTMLElement)]),hideSortableGhost:x.default.bool,keyboardSortingTransitionDuration:x.default.number,lockAxis:x.default.string,lockOffset:x.default.oneOfType([x.default.number,x.default.string,x.default.arrayOf(x.default.oneOfType([x.default.number,x.default.string]))]),lockToContainerEdges:x.default.bool,onSortEnd:x.default.func,onSortMove:x.default.func,onSortOver:x.default.func,onSortStart:x.default.func,pressDelay:x.default.number,pressThreshold:x.default.number,keyCodes:x.default.shape({lift:x.default.arrayOf(x.default.number),drop:x.default.arrayOf(x.default.number),cancel:x.default.arrayOf(x.default.number),up:x.default.arrayOf(x.default.number),down:x.default.arrayOf(x.default.number)}),shouldCancelStart:x.default.func,transitionDuration:x.default.number,updateBeforeSortStart:x.default.func,useDragHandle:x.default.bool,useWindowAsScrollContainer:x.default.bool},Tn={lift:[me.SPACE],drop:[me.SPACE],cancel:[me.ESC],up:[me.UP,me.LEFT],down:[me.DOWN,me.RIGHT]},Pr={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Rr,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Tn,shouldCancelStart:Br,transitionDuration:300,useWindowAsScrollContainer:!1},Dr=Object.keys(On);function Mr(e){(0,ue.default)(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Xr(e,n){try{var r=e()}catch(o){return n(!0,o)}return r&&r.then?r.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}var En=(0,z.createContext)({manager:{}});function Gn(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=(function(i){et(s,i);function s(l){var t;Se(this,s),t=$e(this,Te(s).call(this,l)),N(O(O(t)),"state",{}),N(O(O(t)),"handleStart",function(a){var c=t.props,d=c.distance,f=c.shouldCancelStart;if(!(a.button===2||f(a))){t.touched=!0,t.position=Pe(a);var p=De(a.target,function(w){return w.sortableInfo!=null});if(p&&p.sortableInfo&&t.nodeIsChild(p)&&!t.state.sorting){var b=t.props.useDragHandle,v=p.sortableInfo,R=v.index,m=v.collection,S=v.disabled;if(S||b&&!De(a.target,wn))return;t.manager.active={collection:m,index:R},!Or(a)&&a.target.tagName===ye.Anchor&&a.preventDefault(),d||(t.props.pressDelay===0?t.handlePress(a):t.pressTimer=setTimeout(function(){return t.handlePress(a)},t.props.pressDelay))}}}),N(O(O(t)),"nodeIsChild",function(a){return a.sortableInfo.manager===t.manager}),N(O(O(t)),"handleMove",function(a){var c=t.props,d=c.distance,f=c.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var p=Pe(a),b={x:t.position.x-p.x,y:t.position.y-p.y},v=Math.abs(b.x)+Math.abs(b.y);t.delta=b,!d&&(!f||v>=f)?(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0)):d&&v>=d&&t.manager.isActive()&&t.handlePress(a)}}),N(O(O(t)),"handleEnd",function(){t.touched=!1,t.cancel()}),N(O(O(t)),"cancel",function(){var a=t.props.distance,c=t.state.sorting;c||(a||clearTimeout(t.pressTimer),t.manager.active=null)}),N(O(O(t)),"handlePress",function(a){try{var c=t.manager.getActive(),d=(function(){if(c){var f=function(){var P=A.sortableInfo.index,W=Sr(A),K=Nr(t.container),F=t.scrollContainer.getBoundingClientRect(),fe=v({index:P,node:A,collection:L});if(t.node=A,t.margin=W,t.gridGap=K,t.width=fe.width,t.height=fe.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=A.getBoundingClientRect(),t.containerBoundingRect=F,t.index=P,t.newIndex=P,t.axis={x:b.indexOf("x")>=0,y:b.indexOf("y")>=0},t.offsetEdge=rt(A,t.container),h?t.initialOffset=Pe(Qe({},a,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top})):t.initialOffset=Pe(a),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(Wr(A)),tt(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-W.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-W.top,"px"),width:"".concat(t.width,"px")}),h&&t.helper.focus(),m&&(t.sortableGhost=A,tt(A,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},h){var Ie=I?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,Ve=Ie.top,ze=Ie.left,ft=Ie.width,pt=Ie.height,ht=Ve+pt,gt=ze+ft;t.axis.x&&(t.minTranslate.x=ze-t.boundingClientRect.left,t.maxTranslate.x=gt-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=Ve-t.boundingClientRect.top,t.maxTranslate.y=ht-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(I?0:F.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(I?t.contentWindow.innerWidth:F.left+F.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(I?0:F.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(I?t.contentWindow.innerHeight:F.top+F.height)-t.boundingClientRect.top-t.height/2);R&&R.split(" ").forEach(function(pe){return t.helper.classList.add(pe)}),t.listenerNode=a.touches?a.target:t.contentWindow,h?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(Ee.move.forEach(function(pe){return t.listenerNode.addEventListener(pe,t.handleSortMove,!1)}),Ee.end.forEach(function(pe){return t.listenerNode.addEventListener(pe,t.handleSortEnd,!1)})),t.setState({sorting:!0,sortingIndex:P}),w&&w({node:A,index:P,collection:L,isKeySorting:h,nodes:t.manager.getOrderedRefs(),helper:t.helper},a),h&&t.keyMove(0)},p=t.props,b=p.axis,v=p.getHelperDimensions,R=p.helperClass,m=p.hideSortableGhost,S=p.updateBeforeSortStart,w=p.onSortStart,I=p.useWindowAsScrollContainer,A=c.node,L=c.collection,h=t.manager.isKeySorting,G=(function(){if(typeof S=="function"){t._awaitingUpdateBeforeSortStart=!0;var C=Xr(function(){var P=A.sortableInfo.index;return Promise.resolve(S({collection:L,index:P,node:A,isKeySorting:h},a)).then(function(){})},function(P,W){if(t._awaitingUpdateBeforeSortStart=!1,P)throw W;return W});if(C&&C.then)return C.then(function(){})}})();return G&&G.then?G.then(f):f(G)}})();return Promise.resolve(d&&d.then?d.then(function(){}):void 0)}catch(f){return Promise.reject(f)}}),N(O(O(t)),"handleSortMove",function(a){var c=t.props.onSortMove;typeof a.preventDefault=="function"&&a.cancelable&&a.preventDefault(),t.updateHelperPosition(a),t.animateNodes(),t.autoscroll(),c&&c(a)}),N(O(O(t)),"handleSortEnd",function(a){var c=t.props,d=c.hideSortableGhost,f=c.onSortEnd,p=t.manager,b=p.active.collection,v=p.isKeySorting,R=t.manager.getOrderedRefs();t.listenerNode&&(v?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(Ee.move.forEach(function(A){return t.listenerNode.removeEventListener(A,t.handleSortMove)}),Ee.end.forEach(function(A){return t.listenerNode.removeEventListener(A,t.handleSortEnd)}))),t.helper.parentNode.removeChild(t.helper),d&&t.sortableGhost&&tt(t.sortableGhost,{opacity:"",visibility:""});for(var m=0,S=R.length;m<S;m++){var w=R[m],I=w.node;w.edgeOffset=null,w.boundingClientRect=null,nt(I,null),vt(I,null),w.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),typeof f=="function"&&f({collection:b,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:v,nodes:R},a),t.touched=!1}),N(O(O(t)),"autoscroll",function(){var a=t.props.disableAutoscroll,c=t.manager.isKeySorting;if(a){t.autoScroller.clear();return}if(c){var d=Qe({},t.translate),f=0,p=0;t.axis.x&&(d.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),f=t.translate.x-d.x),t.axis.y&&(d.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),p=t.translate.y-d.y),t.translate=d,nt(t.helper,t.translate),t.scrollContainer.scrollLeft+=f,t.scrollContainer.scrollTop+=p;return}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}),N(O(O(t)),"onAutoScroll",function(a){t.translate.x+=a.left,t.translate.y+=a.top,t.animateNodes()}),N(O(O(t)),"handleKeyDown",function(a){var c=a.keyCode,d=t.props,f=d.shouldCancelStart,p=d.keyCodes,b=p===void 0?{}:p,v=Qe({},Tn,b);t.manager.active&&!t.manager.isKeySorting||!t.manager.active&&(!v.lift.includes(c)||f(a)||!t.isValidSortingTarget(a))||(a.stopPropagation(),a.preventDefault(),v.lift.includes(c)&&!t.manager.active?t.keyLift(a):v.drop.includes(c)&&t.manager.active?t.keyDrop(a):v.cancel.includes(c)?(t.newIndex=t.manager.active.index,t.keyDrop(a)):v.up.includes(c)?t.keyMove(-1):v.down.includes(c)&&t.keyMove(1))}),N(O(O(t)),"keyLift",function(a){var c=a.target,d=De(c,function(v){return v.sortableInfo!=null}),f=d.sortableInfo,p=f.index,b=f.collection;t.initialFocusedNode=c,t.manager.isKeySorting=!0,t.manager.active={index:p,collection:b},t.handlePress(a)}),N(O(O(t)),"keyMove",function(a){var c=t.manager.getOrderedRefs(),d=c[c.length-1].node.sortableInfo.index,f=t.newIndex+a,p=t.newIndex;if(!(f<0||f>d)){t.prevIndex=p,t.newIndex=f;var b=Tr(t.newIndex,t.prevIndex,t.index),v=c.find(function(h){var G=h.node;return G.sortableInfo.index===b}),R=v.node,m=t.containerScrollDelta,S=v.boundingClientRect||xt(R,m),w=v.translate||{x:0,y:0},I={top:S.top+w.y-m.top,left:S.left+w.x-m.left},A=p<f,L={x:A&&t.axis.x?R.offsetWidth-t.width:0,y:A&&t.axis.y?R.offsetHeight-t.height:0};t.handleSortMove({pageX:I.left+L.x,pageY:I.top+L.y,ignoreTransition:a===0})}}),N(O(O(t)),"keyDrop",function(a){t.handleSortEnd(a),t.initialFocusedNode&&t.initialFocusedNode.focus()}),N(O(O(t)),"handleKeyEnd",function(a){t.manager.active&&t.keyDrop(a)}),N(O(O(t)),"isValidSortingTarget",function(a){var c=t.props.useDragHandle,d=a.target,f=De(d,function(p){return p.sortableInfo!=null});return f&&f.sortableInfo&&!f.sortableInfo.disabled&&(c?wn(d):d.sortableInfo)});var u=new Cr;return Mr(l),t.manager=u,t.wrappedInstance=(0,z.createRef)(),t.sortableContextValue={manager:u},t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return Oe(s,[{key:"componentDidMount",value:function(){var t=this,u=this.props.useWindowAsScrollContainer,a=this.getContainer();Promise.resolve(a).then(function(c){t.container=c,t.document=t.container.ownerDocument||document;var d=t.props.contentWindow||t.document.defaultView||window;t.contentWindow=typeof d=="function"?d():d,t.scrollContainer=u?t.document.scrollingElement||t.document.documentElement:An(t.container)||t.container,t.autoScroller=new kr(t.scrollContainer,t.onAutoScroll),Object.keys(t.events).forEach(function(f){return Ee[f].forEach(function(p){return t.container.addEventListener(p,t.events[f],!1)})}),t.container.addEventListener("keydown",t.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var t=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(u){return Ee[u].forEach(function(a){return t.container.removeEventListener(a,t.events[u])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(t){var u=this.props,a=u.lockAxis,c=u.lockOffset,d=u.lockToContainerEdges,f=u.transitionDuration,p=u.keyboardSortingTransitionDuration,b=p===void 0?f:p,v=this.manager.isKeySorting,R=t.ignoreTransition,m=Pe(t),S={x:m.x-this.initialOffset.x,y:m.y-this.initialOffset.y};if(S.y-=window.pageYOffset-this.initialWindowScroll.top,S.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=S,d){var w=Er({height:this.height,lockOffset:c,width:this.width}),I=bt(w,2),A=I[0],L=I[1],h={x:this.width/2-A.x,y:this.height/2-A.y},G={x:this.width/2-L.x,y:this.height/2-L.y};S.x=vn(this.minTranslate.x+h.x,this.maxTranslate.x-G.x,S.x),S.y=vn(this.minTranslate.y+h.y,this.maxTranslate.y-G.y,S.y)}a==="x"?S.y=0:a==="y"&&(S.x=0),v&&b&&!R&&vt(this.helper,b),nt(this.helper,S)}},{key:"animateNodes",value:function(){var t=this.props,u=t.transitionDuration,a=t.hideSortableGhost,c=t.onSortOver,d=this.containerScrollDelta,f=this.windowScrollDelta,p=this.manager.getOrderedRefs(),b={left:this.offsetEdge.left+this.translate.x+d.left,top:this.offsetEdge.top+this.translate.y+d.top},v=this.manager.isKeySorting,R=this.newIndex;this.newIndex=null;for(var m=0,S=p.length;m<S;m++){var w=p[m].node,I=w.sortableInfo.index,A=w.offsetWidth,L=w.offsetHeight,h={height:this.height>L?L/2:this.height/2,width:this.width>A?A/2:this.width/2},G=v&&I>this.index&&I<=R,C=v&&I<this.index&&I>=R,P={x:0,y:0},W=p[m].edgeOffset;W||(W=rt(w,this.container),p[m].edgeOffset=W,v&&(p[m].boundingClientRect=xt(w,d)));var K=m<p.length-1&&p[m+1],F=m>0&&p[m-1];if(K&&!K.edgeOffset&&(K.edgeOffset=rt(K.node,this.container),v&&(K.boundingClientRect=xt(K.node,d))),I===this.index){a&&(this.sortableGhost=w,tt(w,{opacity:0,visibility:"hidden"}));continue}u&&vt(w,u),this.axis.x?this.axis.y?C||I<this.index&&(b.left+f.left-h.width<=W.left&&b.top+f.top<=W.top+h.height||b.top+f.top+h.height<=W.top)?(P.x=this.width+this.marginOffset.x,W.left+P.x>this.containerBoundingRect.width-h.width&&K&&(P.x=K.edgeOffset.left-W.left,P.y=K.edgeOffset.top-W.top),this.newIndex===null&&(this.newIndex=I)):(G||I>this.index&&(b.left+f.left+h.width>=W.left&&b.top+f.top+h.height>=W.top||b.top+f.top+h.height>=W.top+L))&&(P.x=-(this.width+this.marginOffset.x),W.left+P.x<this.containerBoundingRect.left+h.width&&F&&(P.x=F.edgeOffset.left-W.left,P.y=F.edgeOffset.top-W.top),this.newIndex=I):G||I>this.index&&b.left+f.left+h.width>=W.left?(P.x=-(this.width+this.marginOffset.x),this.newIndex=I):(C||I<this.index&&b.left+f.left<=W.left+h.width)&&(P.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=I)):this.axis.y&&(G||I>this.index&&b.top+f.top+h.height>=W.top?(P.y=-(this.height+this.marginOffset.y),this.newIndex=I):(C||I<this.index&&b.top+f.top<=W.top+h.height)&&(P.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=I))),nt(w,P),p[m].translate=P}this.newIndex==null&&(this.newIndex=this.index),v&&(this.newIndex=R);var fe=v?this.prevIndex:R;c&&this.newIndex!==fe&&c({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:fe,isKeySorting:v,nodes:p,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return(0,ue.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var t=this.props.getContainer;return typeof t!="function"?(0,ot.findDOMNode)(this):t(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,z.createElement)(En.Provider,{value:this.sortableContextValue},(0,z.createElement)(e,Ae({ref:t},In(this.props,Dr))))}},{key:"helperContainer",get:function(){var t=this.props.helperContainer;return typeof t=="function"?t():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var t=this.props.useWindowAsScrollContainer;return t?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s})(z.Component),N(n,"displayName",wt("sortableList",e)),N(n,"defaultProps",Pr),N(n,"propTypes",On),r}var Nn={index:x.default.number.isRequired,collection:x.default.oneOfType([x.default.number,x.default.string]),disabled:x.default.bool},Lr=Object.keys(Nn);function Wn(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=(function(i){et(s,i);function s(){var l,t;Se(this,s);for(var u=arguments.length,a=new Array(u),c=0;c<u;c++)a[c]=arguments[c];return t=$e(this,(l=Te(s)).call.apply(l,[this].concat(a))),N(O(O(t)),"wrappedInstance",(0,z.createRef)()),t}return Oe(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(t){this.node&&(t.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),t.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),t.collection!==this.props.collection&&(this.unregister(t.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var t=this.props,u=t.collection,a=t.disabled,c=t.index,d=(0,ot.findDOMNode)(this);d.sortableInfo={collection:u,disabled:a,index:c,manager:this.context.manager},this.node=d,this.ref={node:d},this.context.manager.add(u,this.ref)}},{key:"unregister",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(t,this.ref)}},{key:"getWrappedInstance",value:function(){return(0,ue.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,z.createElement)(e,Ae({ref:t},In(this.props,Lr)))}}]),s})(z.Component),N(n,"displayName",wt("sortableElement",e)),N(n,"contextType",En),N(n,"propTypes",Nn),N(n,"defaultProps",{collection:0}),r}var ie=j(le(),1);var At=new Set,V=new WeakMap,ve=new WeakMap,_=new WeakMap,Xe=new WeakMap,It=new WeakMap,Me=new WeakMap,be=new WeakMap,de=new WeakMap,Ne=new WeakSet,U,St=0,Ot=0,oe="__aa_tgt",Le="__aa_del",at="__aa_new",Bn=e=>{let n=Fr(e);n&&n.forEach(r=>Vr(r))},jr=e=>{e.forEach(n=>{n.target===U&&Yr(),V.has(n.target)&&xe(n.target)})};function Pn(e){let n=e.getBoundingClientRect(),r=U?.clientWidth||0,o=U?.clientHeight||0;return n.bottom<0||n.top>o||n.right<0||n.left>r}function Tt(e){let n=Xe.get(e);n?.disconnect();let r=V.get(e),o=0,i=5;r||(r=We(e),V.set(e,r));let{offsetWidth:s,offsetHeight:l}=U,u=[r.top-i,s-(r.left+i+r.width),l-(r.top+i+r.height),r.left-i].map(c=>`${-1*Math.floor(c)}px`).join(" "),a=new IntersectionObserver(()=>{++o>1&&xe(e)},{root:U,threshold:1,rootMargin:u});a.observe(e),Xe.set(e,a)}function xe(e,n=!0){clearTimeout(de.get(e));let r=st(e),o=n?je(r)?500:r.duration:0;de.set(e,setTimeout(async()=>{let i=_.get(e);try{await i?.finished,V.set(e,We(e)),Tt(e)}catch{}},o))}function Yr(){clearTimeout(de.get(U)),de.set(U,setTimeout(()=>{At.forEach(e=>it(e,n=>Dn(()=>xe(n))))},100))}function Hr(e){setTimeout(()=>{Me.set(e,setInterval(()=>Dn(xe.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function Dn(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}var re,Mn=typeof window<"u"&&"ResizeObserver"in window;Mn&&(U=document.documentElement,new MutationObserver(Bn),re=new ResizeObserver(jr),window.addEventListener("scroll",()=>{Ot=window.scrollY,St=window.scrollX}),re.observe(U));function Fr(e){return e.reduce((o,i)=>[...o,...Array.from(i.addedNodes),...Array.from(i.removedNodes)],[]).every(o=>o.nodeName==="#comment")?!1:e.reduce((o,i)=>{if(o===!1)return!1;if(i.target instanceof Element){if(Ct(i.target),!o.has(i.target)){o.add(i.target);for(let s=0;s<i.target.children.length;s++){let l=i.target.children.item(s);if(l){if(Le in l)return!1;Ct(i.target,l),o.add(l)}}}if(i.removedNodes.length)for(let s=0;s<i.removedNodes.length;s++){let l=i.removedNodes[s];if(Le in l)return!1;l instanceof Element&&(o.add(l),Ct(i.target,l),ve.set(l,[i.previousSibling,i.nextSibling]))}}return o},new Set)}function Ct(e,n){!n&&!(oe in e)?Object.defineProperty(e,oe,{value:e}):n&&!(oe in n)&&Object.defineProperty(n,oe,{value:e})}function Vr(e){var n,r;let o=e.isConnected,i=V.has(e);o&&ve.has(e)&&ve.delete(e),((n=_.get(e))===null||n===void 0?void 0:n.playState)!=="finished"&&((r=_.get(e))===null||r===void 0||r.cancel()),at in e?kn(e):i&&o?Ur(e):i&&!o?Zr(e):kn(e)}function ee(e){return Number(e.replace(/[^0-9.\-]/g,""))}function zr(e){let n=e.parentElement;for(;n;){if(n.scrollLeft||n.scrollTop)return{x:n.scrollLeft,y:n.scrollTop};n=n.parentElement}return{x:0,y:0}}function We(e){let n=e.getBoundingClientRect(),{x:r,y:o}=zr(e);return{top:n.top+o,left:n.left+r,width:n.width,height:n.height}}function Xn(e,n,r){let o=n.width,i=n.height,s=r.width,l=r.height,t=getComputedStyle(e);if(t.getPropertyValue("box-sizing")==="content-box"){let a=ee(t.paddingTop)+ee(t.paddingBottom)+ee(t.borderTopWidth)+ee(t.borderBottomWidth),c=ee(t.paddingLeft)+ee(t.paddingRight)+ee(t.borderRightWidth)+ee(t.borderLeftWidth);o-=c,s-=c,i-=a,l-=a}return[o,s,i,l].map(Math.round)}function st(e){return oe in e&&be.has(e[oe])?be.get(e[oe]):{duration:250,easing:"ease-in-out"}}function Ln(e){if(oe in e)return e[oe]}function Et(e){let n=Ln(e);return n?Ne.has(n):!1}function it(e,...n){n.forEach(r=>r(e,be.has(e)));for(let r=0;r<e.children.length;r++){let o=e.children.item(r);o&&n.forEach(i=>i(o,be.has(o)))}}function Gt(e){return Array.isArray(e)?e:[e]}function je(e){return typeof e=="function"}function Ur(e){let n=V.get(e),r=We(e);if(!Et(e))return V.set(e,r);if(Pn(e)){V.set(e,r),Tt(e);return}let o;if(!n)return;let i=st(e);if(typeof i!="function"){let s=n.left-r.left,l=n.top-r.top,t=n.left+n.width-(r.left+r.width);n.top+n.height-(r.top+r.height)==0&&(l=0),t==0&&(s=0);let[a,c,d,f]=Xn(e,n,r),p={transform:`translate(${s}px, ${l}px)`},b={transform:"translate(0, 0)"};a!==c&&(p.width=`${a}px`,b.width=`${c}px`),d!==f&&(p.height=`${d}px`,b.height=`${f}px`),o=e.animate([p,b],{duration:i.duration,easing:i.easing})}else{let[s]=Gt(i(e,"remain",n,r));o=new Animation(s),o.play()}_.set(e,o),V.set(e,r),o.addEventListener("finish",xe.bind(null,e,!1),{once:!0})}function kn(e){at in e&&delete e[at];let n=We(e);V.set(e,n);let r=st(e);if(!Et(e))return;if(Pn(e)){Tt(e);return}let o;if(typeof r!="function")o=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:r.duration*1.5,easing:"ease-in"});else{let[i]=Gt(r(e,"add",n));o=new Animation(i),o.play()}_.set(e,o),o.addEventListener("finish",xe.bind(null,e,!1),{once:!0})}function Rn(e,n){var r;e.remove(),V.delete(e),ve.delete(e),_.delete(e),(r=Xe.get(e))===null||r===void 0||r.disconnect(),setTimeout(()=>{if(Le in e&&delete e[Le],Object.defineProperty(e,at,{value:!0,configurable:!0}),n&&e instanceof HTMLElement)for(let o in n)e.style[o]=""},0)}function Zr(e){var n;if(!ve.has(e)||!V.has(e))return;let[r,o]=ve.get(e);Object.defineProperty(e,Le,{value:!0,configurable:!0});let i=window.scrollX,s=window.scrollY;if(o&&o.parentNode&&o.parentNode instanceof Element?o.parentNode.insertBefore(e,o):r&&r.parentNode?r.parentNode.appendChild(e):(n=Ln(e))===null||n===void 0||n.appendChild(e),!Et(e))return Rn(e);let[l,t,u,a]=Jr(e),c=st(e),d=V.get(e);(i!==St||s!==Ot)&&Kr(e,i,s,c);let f,p={position:"absolute",top:`${l}px`,left:`${t}px`,width:`${u}px`,height:`${a}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!je(c))Object.assign(e.style,p),f=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:c.duration,easing:"ease-out"});else{let[b,v]=Gt(c(e,"remove",d));v?.styleReset!==!1&&(p=v?.styleReset||p,Object.assign(e.style,p)),f=new Animation(b),f.play()}_.set(e,f),f.addEventListener("finish",()=>Rn(e,p),{once:!0})}function Kr(e,n,r,o){let i=St-n,s=Ot-r,l=document.documentElement.style.scrollBehavior;if(getComputedStyle(U).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+i,window.scrollY+s),!e.parentElement)return;let u=e.parentElement,a=u.clientHeight,c=u.clientWidth,d=performance.now();function f(){requestAnimationFrame(()=>{if(!je(o)){let p=a-u.clientHeight,b=c-u.clientWidth;d+o.duration>performance.now()?(window.scrollTo({left:window.scrollX-b,top:window.scrollY-p}),a=u.clientHeight,c=u.clientWidth,f()):document.documentElement.style.scrollBehavior=l}})}f()}function Jr(e){var n;let r=V.get(e),[o,,i]=Xn(e,r,We(e)),s=e.parentElement;for(;s&&(getComputedStyle(s).position==="static"||s instanceof HTMLBodyElement);)s=s.parentElement;s||(s=document.body);let l=getComputedStyle(s),t=!_.has(e)||((n=_.get(e))===null||n===void 0?void 0:n.playState)==="finished"?We(s):V.get(s),u=Math.round(r.top-t.top)-ee(l.borderTopWidth),a=Math.round(r.left-t.left)-ee(l.borderLeftWidth);return[u,a,o,i]}function jn(e,n={}){if(Mn&&re&&!(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!je(n)&&!n.disrespectUserMotionPreference)){Ne.add(e),getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),it(e,xe,Hr,l=>re?.observe(l)),je(n)?be.set(e,n):be.set(e,{duration:250,easing:"ease-in-out",...n});let s=new MutationObserver(Bn);s.observe(e,{childList:!0}),It.set(e,s),At.add(e)}return Object.freeze({parent:e,enable:()=>{Ne.add(e)},disable:()=>{Ne.delete(e),it(e,o=>{let i=_.get(o);try{i?.cancel()}catch{}_.delete(o);let s=de.get(o);s&&clearTimeout(s),de.delete(o);let l=Me.get(o);l&&clearInterval(l),Me.delete(o)})},isEnabled:()=>Ne.has(e),destroy:()=>{Ne.delete(e),At.delete(e),be.delete(e);let o=It.get(e);o?.disconnect(),It.delete(e),it(e,i=>{re?.unobserve(i);let s=_.get(i);try{s?.cancel()}catch{}_.delete(i);let l=Xe.get(i);l?.disconnect(),Xe.delete(i);let t=Me.get(i);t&&clearInterval(t),Me.delete(i);let u=de.get(i);u&&clearTimeout(u),de.delete(i),V.delete(i),ve.delete(i)})}})}function Nt(e){let[n,r]=(0,ie.useState)(),o=(0,ie.useMemo)(()=>e,[]),i=(0,ie.useCallback)(l=>{l instanceof HTMLElement?r(jn(l,o)):r(void 0)},[o]),s=(0,ie.useCallback)(l=>{n&&(l?n.enable():n.disable())},[n]);return(0,ie.useEffect)(()=>()=>{var l;(l=n?.destroy)===null||l===void 0||l.call(n)},[n]),[i,s]}var Hn=j(mt());function _r(e,n,r){let o=n<0?e.length+n:n;if(o>=0&&o<e.length){let i=r<0?e.length+r:r,[s]=e.splice(n,1);e.splice(i,0,s)}}function Yn(e,n,r){return e=[...e],_r(e,n,r),e}var lt=j(Re());var Z={simpleWrapperOneButton:"mireo91-repeatablefields-xY17aG-simpleWrapperOneButton",noSelect:"mireo91-repeatablefields-xY17aG-noSelect",simpleButtons:"mireo91-repeatablefields-xY17aG-simpleButtons",property:"mireo91-repeatablefields-xY17aG-property",buttons:"mireo91-repeatablefields-xY17aG-buttons",wrapper:"mireo91-repeatablefields-xY17aG-wrapper",delete:"mireo91-repeatablefields-xY17aG-delete",simpleWrapper:"mireo91-repeatablefields-xY17aG-simpleWrapper",group:"mireo91-repeatablefields-xY17aG-group",move:"mireo91-repeatablefields-xY17aG-move",simpleWrapperTwoButtons:"mireo91-repeatablefields-xY17aG-simpleWrapperTwoButtons"};var Wt=Sn(()=>Q.default.createElement("span",{type:"button",className:Z.move},Q.default.createElement(Hn.Icon,{icon:"sort"}))),Fn={disrespectUserMotionPreferences:!0},Qr=Wn(({value:e})=>Q.default.createElement("div",null,e)),$r=Gn(({children:e,automaticSorting:n,manualSort:r})=>{let[o,i]=Nt(Fn);return(0,Q.useEffect)(()=>{document.body.style.cursor=r?"grabbing":null,i(!1);let s=setTimeout(()=>{i(!r)},500);return()=>clearTimeout(s)},[r]),Q.default.createElement("div",{className:r&&Z.noSelect,ref:n?o:null},e)});function kt({onChange:e,value:n,element:r,items:o,enable:i,automaticSorting:s,KEY_PROPERTY:l}){if(!i){let[c]=Nt(Fn);return Q.default.createElement("div",{ref:s?c:null},o.map((d,f)=>Q.default.createElement("div",{key:d[l]},r(f))))}let[t,u]=(0,Q.useState)(!1);function a({oldIndex:c,newIndex:d}){e(Yn(n,c,d)),u(!1)}return Q.default.createElement($r,{onSortStart:()=>u(!0),manualSort:t,onSortEnd:a,automaticSorting:s,useDragHandle:!0,axis:"y",lockAxis:"y"},o.map((c,d)=>Q.default.createElement(Qr,{key:c[l],index:d,value:r(d)})))}kt.propTypes={items:lt.default.array.isRequired,onSortEndAction:lt.default.func.isRequired,element:lt.default.func.isRequired};var Vn=j(le()),H=j(Re()),zn=j(Ke()),qr=window["@Neos:HostPluginAPI"]["@NeosProjectPackages"]().NeosUiEditors.EditorEnvelope;function Un({commit:e,editorId:n,editorOptions:r,id:o,...i}){function s(l,t){let{property:u,hooksRegistry:a}=i;if(t){Object.keys(t).map(c=>{a.get(c)(l,t[c]).then(f=>{let p=(({__type:b,...v})=>v)(f);e(o,u,p)})});return}e(o,u,l)}return Vn.default.createElement(qr,{...i,commit:s,options:r||{},id:`${n}-${o}`})}Un.propTypes={identifier:H.default.string.isRequired,label:H.default.string.isRequired,options:H.default.object,value:H.default.any,renderSecondaryInspector:H.default.func,editor:H.default.string.isRequired,editorRegistry:H.default.object.isRequired,i18nRegistry:H.default.object.isRequired,validationErrors:H.default.array,onEnterKey:H.default.func,helpMessage:H.default.string,helpThumbnail:H.default.string,highlight:H.default.bool,property:H.default.string.isRequired,id:H.default.number.isRequired,commit:H.default.func.isRequired};var eo=(0,zn.neos)(e=>({hooksRegistry:e.get("inspector").get("saveHooks")})),Zn=eo(Un);function Kn(e,n,r){return e=no(e),Rt(r,n,e)}var we=e=>JSON.parse(JSON.stringify(e)),Bt=(e,n)=>JSON.stringify(e)==JSON.stringify(n);function ct(e){return typeof e=="number"?!0:typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}function ut(e){return e?typeof e=="string"?e.includes("ClientEval:"):Array.isArray(e)?e.some(n=>ut(n)):Jn(e)?ut(Object.values(e)):!1:!1}function dt(e,n,r,o,i){return typeof e=="string"?to(e,n,r,o,i):Array.isArray(e)?e.map(s=>dt(s,n,r,o,i)):Jn(e)?Object.fromEntries(Object.entries(e).map(([s,l])=>[s,dt(l,n,r,o,i)])):e}function to(e,n,r,o,i){if(typeof e=="string"&&e.startsWith("ItemEval:"))try{return new Function("item,node,parentNode,documentNode","return "+e.replace("ItemEval:",""))(n,r,o,i)}catch(s){return console.warn('An error occurred while trying to evaluate "'+e+`"
`,s),e}return e}function Jn(e){return e!=null&&(e.constructor===Object||!e.constructor&&typeof e=="object")}function _n(e,n){let r=we(e);return!Array.isArray(r)||!r.length||!Array.isArray(n)||!n.length?r:r.sort((o,i)=>n.reduce((s,l)=>{if(s!==0)return s;let{property:t,order:u="asc"}=l,a=o[t],c=i[t],d=0;return ct(a)&&ct(c)?a>c?d=1:a<c&&(d=-1):d=a.localeCompare(c),u==="desc"&&(d*=-1),d},0))}function Ye(e,n){let r=we(e);for(let o in n)o in n&&(n[o]instanceof Object&&r[o]instanceof Object?r[o]=Ye(r[o],n[o]):r[o]=n[o]);return r}function no(e){return Array.isArray(e)?e:typeof e=="number"?[e]:e.split(".").map(n=>{let r=parseInt(n);return!isNaN(r)&&String(r)===n?r:n})}function Rt(e,n,r){if(r.length===0)return n;if(typeof e>"u"&&(typeof r[0]=="number"?e=[]:e={}),Array.isArray(e)){typeof r[0]=="number"&&e.length<r[0]&&(r[0]=e.length);let o=[...e];return o[r[0]]=Rt(e[r[0]],n,r.slice(1)),o}return Object.assign({},e,{[r[0]]:Rt(e[r[0]],n,r.slice(1))})}var He="_UUID_",ro=e=>({contextNodePath:e.focusedNodePath,dataSourceIdentifier:e.options.dataSourceIdentifier,dataSourceUri:e.options.dataSourceUri,dataSourceAdditionalData:e.options.dataSourceAdditionalData,dataSourceDisableCaching:!!e.options.dataSourceDisableCaching});function qn({commit:e,dataSourcesDataLoader:n,editorRegistry:r,i18nRegistry:o,id:i,validatorRegistry:s,value:l,renderHelpIcon:t,identifier:u,...a}){let{dataSourceIdentifier:c,dataSourceUri:d,dataSourceAdditionalData:f}=a.options,p=!!(c||d),b=o.translate(a.label),[v,R]=(0,E.useState)(!0),[m,S]=(0,E.useState)({}),[w,I]=(0,E.useState)(!0),[A,L]=(0,E.useState)(!0),[h,G]=(0,E.useState)([]),[C,P]=(0,E.useState)(p?null:a.options),[W,K]=(0,E.useState)({}),[F,fe]=(0,E.useState)({}),Ie=()=>JSON.stringify(h),[Ve,ze]=(0,E.useState)([]);(0,E.useEffect)(()=>{R(!0),qt.get().endpoints.dataSource("get-property-types",null,{}).then(g=>{S(g),R(!1)})},[]),(0,E.useEffect)(()=>{let g=Ie();if(!(Ve===g||!C)&&(ze(g),tr(h),nr(h),C.sortBy)){let y=setTimeout(()=>{let B=_n(h,C.sortBy);ke(B)},2e3);return()=>clearTimeout(y)}},[h]),(0,E.useEffect)(()=>{if(!C||ut(C))return;let g=gt();K(g),pe(g)},[C,m]);let ft=()=>JSON.stringify({dataSourceIdentifier:c,dataSourceUri:d,dataSourceAdditionalData:f}),[pt,ht]=(0,E.useState)(null);(0,E.useEffect)(()=>{if(!p)return;let g=ft();pt!==g&&(R(!0),ht(g),n.resolveValue(ro(a),h).then(y=>{P(Ye(a.options,y)),R(!1)}))},[c,d,f]);function gt(){let g={},y=C.properties;if(y){let B=[];for(let X in y){let M=y[X];B.push({key:X,position:M?.position??null,item:M})}en(B).forEach(({key:X,item:M})=>{let k=M&&M.defaultValue;g[X]=Ue(k,"")})}return g}function pe(g){let y=l?we(l):[];y=y.map(k=>k[He]?k:{...k,[He]:Ut()});let{min:B,max:X}=C;if(B&&y.length<B)for(var M=0;M<B;++M)y[M]?y[M]=l[M]:y[M]=g;if(X&&y.length>X&&(y=y.slice(0,X)),y.length)for(let k=0;k<y.length;k++){let J=C.predefinedProperties?.[k]?.properties,D=we(y[k]),$=Object.keys(D).filter(he=>he==He||he in g).reduce((he,ge)=>{let Ze=J?.[ge]?.defaultValue!=null?J[ge].defaultValue:D[ge];return ct(Ze)&&(Ze=parseFloat(Ze)),{...he,[ge]:Ze}},{});y[k]=$}G(y)}function ke(g){if(Bt(g,h))return;let y=we(g).map(B=>(delete B[He],B));Bt(y,l)||e(y),G(g)}function tr(g){C&&C.max&&I(C.max>g.length)}function nr(g){C&&C.min&&L(C.min<g.length)}function rr(){ke([...h,W])}function Pt(g){let y=h.filter((B,X)=>g!==X);ke(y)}handleCollapse=g=>{let y=!F[g];fe({...F,[g]:y})};function or(g,y,B){ke(Kn(y,B,h))}function ir(g,y,B,X){if(!y||!y.validation)return;let M=y.validation,J=Object.keys(M).map(D=>{let Ce=M[D];return ar(g,D,Ce)}).filter(D=>D);if(C.controls&&C.controls.add){let D=C?.max?C.max>h.length:!0;I(D&&J.length<=0)}return J}function ar(g,y,B){let X=s.get(y);if(X)return X(g,B);console.warn(`Validator ${y} not found`)}function sr(g){let y=!!C.predefinedProperties&&C.predefinedProperties[g],{controls:B,sortBy:X,properties:M,allowRemovePredefinedProperties:k}=C,J=B.remove&&A?!y||k:!1,D=!y&&B.move&&h.length>1,Ce=J&&D,$=J||D;if(Object.keys(M).length===1)return E.default.createElement("div",{className:Kt(Z.simpleWrapper,Ce?Z.simpleWrapperTwoButtons:$&&Z.simpleWrapperOneButton)},Dt(g),$&&E.default.createElement("div",{class:Z.simpleButtons},J&&E.default.createElement(ae.IconButton,{onClick:()=>Pt(g),className:Z.delete,icon:"trash"}),D&&E.default.createElement(Wt,null)));let ge=!!B.collapse;return E.default.createElement("div",{className:Z.wrapper},!!($||ge)&&E.default.createElement("div",{class:Z.buttons},D&&E.default.createElement(Wt,null),ge&&E.default.createElement(ae.IconButton,{onClick:()=>handleCollapse(g),icon:F[g]?"chevron-down":"chevron-up"}),J&&E.default.createElement(ae.IconButton,{onClick:()=>Pt(g),className:Z.delete,icon:"trash"})),!F[g]&&Dt(g))}function Dt(g){let{predefinedProperties:y}=C,B=y&&y[g]?y[g].label:null,X=[];return Object.keys(W).map(M=>{X.push(lr(M,g))}),X=X.filter(Boolean),X.length===0?null:E.default.createElement("div",{className:Z.group},B&&E.default.createElement("span",{dangerouslySetInnerHTML:{__html:B}}),X)}function Mt(g){return g!=null}function Ue(g,y=""){return Mt(g)?g:y}function lr(g,y){let B=we(h),{properties:X,predefinedProperties:M}=C,k=dt(X[g],B[y],a.node,a.parentNode,a.documentNode);M&&M[y]&&M[y].properties&&M[y].properties[g]&&(k=Ye(k,M[y].properties[g]));let J=k.type?m[k.type]:{};J&&(k=Ye(J,k));let D=Ue(k.editorOptions,{}),Ce=Ue(k.editor,"Neos.Neos/Inspector/Editors/TextFieldEditor"),$=Ue(B[y][g]);!$&&Mt(k.defaultValue)&&($=k.defaultValue),(D.hasOwnProperty("dataSourceUri")||D.hasOwnProperty("dataSourceIdentifier"))&&(D={...D},D.dataSourceAdditionalData?(D.dataSourceAdditionalData.hasOwnProperty("repeatableIndex")&&(D.dataSourceAdditionalData.repeatableIndex=y),D.dataSourceAdditionalData.hasOwnProperty("repeatableValue")&&(D.dataSourceAdditionalData.repeatableValue=h)):D.dataSourceAdditionalData={});let he=Object.keys(X).length<=1;return E.default.createElement("div",{className:!he&&Z.property,hidden:k.hidden},E.default.createElement(Zn,{identifier:`${u}-repeatable-${y}-${g}`,options:D,value:$,renderSecondaryInspector:a.renderSecondaryInspector,editor:Ce,editorRegistry:r,i18nRegistry:o,validationErrors:ir($,k,y,g),highlight:!1,property:`${y}.${g}`,id:`repeatable-${y}-${g}`,editorId:i,commit:or,...k}))}if(v||!C)return E.default.createElement(E.default.Fragment,null,!!b&&E.default.createElement(ae.Label,{htmlFor:i},b," ",t()),E.default.createElement(on,{id:i,isLoading:v,heightMultiplier:2}));if(C.hidden)return null;let{buttonAddLabel:cr="Mireo.RepeatableFields:Main:addRow"}=C;return E.default.createElement(E.default.Fragment,null,!!b&&E.default.createElement(ae.Label,{htmlFor:i},b," ",t()),E.default.createElement(kt,{element:sr,items:h,onChange:ke,enable:C.controls?.move,automaticSorting:C.sortBy,value:h,KEY_PROPERTY:He}),C.controls.add&&w&&E.default.createElement(E.default.Fragment,null,E.default.createElement(ae.Button,{onClick:rr,id:i},o.translate(cr)),!!b||t()))}qn.propTypes={identifier:T.default.string.isRequired,label:T.default.string.isRequired,value:T.default.arrayOf(T.default.object),renderSecondaryInspector:T.default.func,editor:T.default.string.isRequired,editorRegistry:T.default.object.isRequired,i18nRegistry:T.default.object.isRequired,validationErrors:T.default.array,onEnterKey:T.default.func,helpMessage:T.default.string,helpThumbnail:T.default.string,highlight:T.default.bool,commit:T.default.func.isRequired,options:T.default.shape({hidden:T.default.bool,buttonAddLabel:T.default.string,dataSourceIdentifier:T.default.string,dataSourceUri:T.default.string,dataSourceDisableCaching:T.default.bool,dataSourceAdditionalData:T.default.objectOf(T.default.any),predefinedProperties:T.default.arrayOf(T.default.shape({label:T.default.string,value:T.default.object})),max:T.default.number,min:T.default.number,controls:T.default.shape({move:T.default.bool,remove:T.default.bool,add:T.default.bool,collapse:T.default.bool}),sortBy:T.default.arrayOf(T.default.shape({property:T.default.string,direction:T.default.oneOf(["asc","desc"])}))}).isRequired,dataSourcesDataLoader:T.default.shape({resolveValue:T.default.func.isRequired}).isRequired,focusedNodePath:T.default.string.isRequired};var oo=(0,$n.neos)(e=>({editorRegistry:e.get("inspector").get("editors"),i18nRegistry:e.get("i18n"),dataSourcesDataLoader:e.get("dataLoaders").get("DataSources")})),io=(0,Qn.connect)(e=>({focusedNodePath:Fe.selectors.CR.Nodes.focusedNodePathSelector(e),node:Fe.selectors.CR.Nodes.focusedSelector(e),parentNode:Fe.selectors.CR.Nodes.focusedParentSelector(e),documentNode:Fe.selectors.CR.Nodes.documentNodeSelector(e)})),er=oo(io(qn));jt("Mireo.RepeatableFields:RepeatableField",{},e=>{e.get("inspector").get("editors").set("Mireo.RepeatableFields/Inspector/Editors/RepeatableFieldEditor",{component:er,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
