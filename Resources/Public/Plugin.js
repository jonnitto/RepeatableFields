(()=>{var or=Object.create;var Rt=Object.defineProperty;var ir=Object.getOwnPropertyDescriptor;var ar=Object.getOwnPropertyNames;var sr=Object.getPrototypeOf,lr=Object.prototype.hasOwnProperty;var cr=(e,n)=>()=>(e&&(n=e(e=0)),n);var oe=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var ur=(e,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of ar(n))!lr.call(e,a)&&a!==r&&Rt(e,a,{get:()=>n[a],enumerable:!(o=ir(n,a))||o.enumerable});return e};var j=(e,n,r)=>(r=e!=null?or(sr(e)):{},ur(n||!e||!e.__esModule?Rt(r,"default",{value:e,enumerable:!0}):r,e));function Y(e){return(...n)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${e}`])return window["@Neos:HostPluginAPI"][`@${e}`](...n);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var _=cr(()=>{});var ie=oe((Eo,Xt)=>{_();Xt.exports=Y("vendor")().React});var Lt=oe((Wo,Mt)=>{_();Mt.exports=Y("vendor")().reactRedux});var We=oe((Bo,jt)=>{_();jt.exports=Y("vendor")().PropTypes});var Ut=oe((Lo,zt)=>{_();zt.exports=Y("NeosProjectPackages")().NeosUiReduxStore});var ze=oe((Yo,Zt)=>{_();Zt.exports=Y("NeosProjectPackages")().NeosUiDecorators});var pt=oe((Fo,Jt)=>{_();Jt.exports=Y("NeosProjectPackages")().ReactUiComponents});var sn=oe((Ni,an)=>{_();an.exports=Y("vendor")().ReactDOM});var cn=oe((Wi,ln)=>{"use strict";var mr=function(e,n,r,o,a,c,l,t){if(!e){var u;if(n===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=[r,o,a,c,l,t],s=0;u=new Error(n.replace(/%s/g,function(){return i[s++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};ln.exports=mr});_();var dr=(e,n="position",r="key")=>{let o=typeof n=="string"?m=>m[n]:n,a={},c={},l={},t={},u={},i={};e.forEach((m,S)=>{let w=m[r]?m[r]:String(S);a[w]=S;let I=o(m),A=String(I||S),L=!1;if(A.startsWith("start")){let p=A.match(/start\s+(\d+)/),E=p&&p[1]?Number(p[1]):0;l[E]||(l[E]=[]),l[E].push(w)}else if(A.startsWith("end")){let p=A.match(/end\s+(\d+)/),E=p&&p[1]?Number(p[1]):0;t[E]||(t[E]=[]),t[E].push(w)}else if(A.startsWith("before")){let p=A.match(/before\s+(\S+)(\s+(\d+))?/);if(!p)L=!0;else{let E=p[1],C=p[3]?Number(p[3]):0;u[E]||(u[E]={}),u[E][C]||(u[E][C]=[]),u[E][C].push(w)}}else if(A.startsWith("after")){let p=A.match(/after\s+(\S+)(\s+(\d+))?/);if(!p)L=!0;else{let E=p[1],C=p[3]?Number(p[3]):0;i[E]||(i[E]={}),i[E][C]||(i[E][C]=[]),i[E][C].push(w)}}else L=!0;if(L){let p=parseFloat(A);(isNaN(p)||!isFinite(p))&&(p=S),c[p]||(c[p]=[]),c[p].push(w)}});let s=[],d=[],f=[],h=[],v=(m,S)=>{let w=Object.keys(m).map(I=>Number(I)).sort((I,A)=>I-A);return S?w:w.reverse()},b=(m,S)=>{m.forEach(w=>{if(!(h.indexOf(w)>=0)){if(h.push(w),u[w]){let I=v(u[w],!0);for(let A of I)b(u[w][A],S)}if(S.push(w),i[w]){let I=v(i[w],!1);for(let A of I)b(i[w][A],S)}}})};for(let m of v(l,!1))b(l[m],s);for(let m of v(c,!0))b(c[m],d);for(let m of v(t,!0))b(t[m],f);for(let m of Object.keys(u))if(!(h.indexOf(m)>=0))for(let S of v(u[m],!1))b(u[m][S],s);for(let m of Object.keys(i))if(!(h.indexOf(m)>=0))for(let S of v(i[m],!1))b(i[m][S],d);return[...s,...d,...f].map(m=>a[m]).map(m=>e[m])},ft=dr;var Dt=Y("manifest");var G=j(ie()),zn=j(Lt()),T=j(We());var Yt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Ht=(e=21)=>{let n="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)n+=Yt[r[e]&63];return n};function Ft(e){var n,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(n=0;n<a;n++)e[n]&&(r=Ft(e[n]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function pr(){for(var e,n,r=0,o="",a=arguments.length;r<a;r++)(e=arguments[r])&&(n=Ft(e))&&(o&&(o+=" "),o+=n);return o}var Vt=pr;var je=j(Ut()),Un=j(ze()),ne=j(pt());_();var Kt=Y("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:zo}=Y("NeosProjectPackages")().NeosUiBackendConnector;var ae=j(ie());var q=j(ie());function _t({style:e,className:n,size:r=30}){return q.default.createElement("svg",{width:r,height:r,stroke:"currentColor",viewBox:"0 0 24 24",style:e,className:n},q.default.createElement("g",null,q.default.createElement("circle",{cx:"12",cy:"12",r:"9.5",fill:"none","stroke-width":"2","stroke-linecap":"round"},[{attribute:"dasharray",values:"0 150;42 150;42 150;42 150"},{attribute:"dashoffset",values:"0;-16;-59;-59"}].map(({attribute:o,values:a})=>q.default.createElement("animate",{key:o,attributeName:`stroke-${o}`,values:a,dur:"1.5s",calcMode:"spline",keyTimes:"0;0.475;0.95;1",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1",repeatCount:"indefinite"}))),q.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"2s",values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}function Qt({style:e,className:n,size:r=30}){return q.default.createElement("svg",{width:r*2,height:r,viewBox:"0 0 24 12",class:n,style:e},[1,2,3].map(o=>{let a=o*6,c=Math.round(100/3*(o-1))/100;return q.default.createElement("circle",{cx:a,cy:"6",r:"0",fill:"currentColor"},q.default.createElement("animate",{attributeName:"r",begin:c,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))}))}var $t=j(ze()),ht={container:(e=1)=>({display:"grid",gridTemplate:"'content' 1fr / 1fr",alignItems:"center",justifyItems:"center",width:"100%",minHeight:`calc(var(--spacing-GoldenUnit) * ${e})`}),item:(e=!1)=>({gridArea:"content",transition:"opacity var(--transition-Default), transform var(--transition-Default) ease",opacity:e?1:0,transform:`scale(${e?1:0})`})};function hr({id:e,title:n="Neos.Neos:Main:loading",isLoading:r=!1,delayTime:o=500,timeoutTime:a=5e3,i18nRegistry:c,heightMultiplier:l=1,width:t=60}){let[u,i]=(0,ae.useState)(0),s=n?c.translate(n):null;return(0,ae.useEffect)(()=>{if(!r){i(0);return}let d=setTimeout(()=>{i(1)},o),f=setTimeout(()=>{i(2)},o+a);return()=>{clearTimeout(d),clearTimeout(f)}},[r]),r?ae.default.createElement("div",{id:e,style:ht.container(l),title:s},ae.default.createElement(_t,{size:t/2,style:ht.item(u==1)}),ae.default.createElement(Qt,{size:t/2,style:ht.item(u==2)})):null}var gr=(0,$t.neos)(e=>({i18nRegistry:e.get("i18n")})),qt=gr(hr);var K=j(ie());function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},xe.apply(null,arguments)}function en(e){if(Array.isArray(e))return e}function tn(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,a,c,l,t=[],u=!0,i=!1;try{if(c=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=c.call(r)).done)&&(t.push(o.value),t.length!==n);u=!0);}catch(s){i=!0,a=s}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(i)throw a}}return t}}function ke(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=Array(n);r<n;r++)o[r]=e[r];return o}function Ue(e,n){if(e){if(typeof e=="string")return ke(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(e,n):void 0}}function nn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(e,n){return en(e)||tn(e,n)||Ue(e,n)||nn()}function ee(e){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ee(e)}function rn(e,n){if(ee(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,n||"default");if(ee(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Ze(e){var n=rn(e,"string");return ee(n)=="symbol"?n:n+""}function W(e,n,r){return(n=Ze(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Je(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&o.push.apply(o,Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),o.forEach(function(a){W(e,a,r[a])})}return e}function we(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function on(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ze(o.key),o)}}function Ie(e,n,r){return n&&on(e.prototype,n),r&&on(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,n){if(n&&(ee(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ce(e)}function _e(e,n){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_e(e,n)}function Qe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_e(e,n)}var V=j(ie()),tt=j(sn()),se=j(cn());function un(e){if(Array.isArray(e))return ke(e)}function dn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pn(e){return un(e)||dn(e)||Ue(e)||fn()}var x=j(We()),yr=function(){function e(){we(this,e),W(this,"refs",{})}return Ie(e,[{key:"add",value:function(r,o){this.refs[r]||(this.refs[r]=[]),this.refs[r].push(o)}},{key:"remove",value:function(r,o){var a=this.getIndex(r,o);a!==-1&&this.refs[r].splice(a,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var r=this;return this.refs[this.active.collection].find(function(o){var a=o.node;return a.sortableInfo.index==r.active.index})}},{key:"getIndex",value:function(r,o){return this.refs[r].indexOf(o)}},{key:"getOrderedRefs",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[r].sort(br)}}]),e}();function br(e,n){var r=e.node.sortableInfo.index,o=n.node.sortableInfo.index;return r-o}function yn(e,n){return Object.keys(e).reduce(function(r,o){return n.indexOf(o)===-1&&(r[o]=e[o]),r},{})}var Ae={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},bn=function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],n=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1];switch(n){case"ms":return"ms";default:return n&&n.length?n[0].toUpperCase()+n.substr(1):""}}();function $e(e,n){Object.keys(n).forEach(function(r){e.style[r]=n[r]})}function qe(e,n){e.style["".concat(bn,"Transform")]=n==null?"":"translate3d(".concat(n.x,"px,").concat(n.y,"px,0)")}function mt(e,n){e.style["".concat(bn,"TransitionDuration")]=n==null?"":"".concat(n,"ms")}function Re(e,n){for(;e;){if(n(e))return e;e=e.parentNode}return null}function hn(e,n,r){return Math.max(e,Math.min(r,n))}function Se(e){return e.substr(-2)==="px"?parseFloat(e):0}function vr(e){var n=window.getComputedStyle(e);return{bottom:Se(n.marginBottom),left:Se(n.marginLeft),right:Se(n.marginRight),top:Se(n.marginTop)}}function bt(e,n){var r=n.displayName||n.name;return r?"".concat(e,"(").concat(r,")"):e}function yt(e,n){var r=e.getBoundingClientRect();return{top:r.top+n.top,left:r.left+n.left}}function Be(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function xr(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function et(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(e){var o={left:r.left+e.offsetLeft,top:r.top+e.offsetTop};return e.parentNode===n?o:et(e.parentNode,n,o)}}function wr(e,n,r){return e<r&&e>n?e-1:e>r&&e<n?e+1:e}function gn(e){var n=e.lockOffset,r=e.width,o=e.height,a=n,c=n,l="px";if(typeof n=="string"){var t=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(n);(0,se.default)(t!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',n),a=parseFloat(n),c=parseFloat(n),l=t[1]}return(0,se.default)(isFinite(a)&&isFinite(c),"lockOffset value should be a finite. Given %s",n),l==="%"&&(a=a*r/100,c=c*o/100),{x:a,y:c}}function Ir(e){var n=e.height,r=e.width,o=e.lockOffset,a=Array.isArray(o)?o:[o,o];(0,se.default)(a.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var c=gt(a,2),l=c[0],t=c[1];return[gn({height:n,lockOffset:l,width:r}),gn({height:n,lockOffset:t,width:r})]}function Cr(e){var n=window.getComputedStyle(e),r=/(auto|scroll)/,o=["overflow","overflowX","overflowY"];return o.find(function(a){return r.test(n[a])})}function vn(e){return e instanceof HTMLElement?Cr(e)?e:vn(e.parentNode):null}function Ar(e){var n=window.getComputedStyle(e);return n.display==="grid"?{x:Se(n.gridColumnGap),y:Se(n.gridRowGap)}:{x:0,y:0}}var fe={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},pe={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Sr(e){var n="input, textarea, select, canvas, [contenteditable]",r=e.querySelectorAll(n),o=e.cloneNode(!0),a=pn(o.querySelectorAll(n));return a.forEach(function(c,l){if(c.type!=="file"&&(c.value=r[l].value),c.type==="radio"&&c.name&&(c.name="__sortableClone__".concat(c.name)),c.tagName===pe.Canvas&&r[l].width>0&&r[l].height>0){var t=c.getContext("2d");t.drawImage(r[l],0,0)}}),o}function xn(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=function(a){Qe(c,a);function c(){var l,t;we(this,c);for(var u=arguments.length,i=new Array(u),s=0;s<u;s++)i[s]=arguments[s];return t=Ke(this,(l=Ce(c)).call.apply(l,[this].concat(i))),W(O(O(t)),"wrappedInstance",(0,V.createRef)()),t}return Ie(c,[{key:"componentDidMount",value:function(){var t=(0,tt.findDOMNode)(this);t.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return(0,se.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,V.createElement)(e,xe({ref:t},this.props))}}]),c}(V.Component),W(n,"displayName",bt("sortableHandle",e)),r}function mn(e){return e.sortableHandle!=null}var Or=function(){function e(n,r){we(this,e),this.container=n,this.onScrollCallback=r}return Ie(e,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(r){var o=this,a=r.translate,c=r.minTranslate,l=r.maxTranslate,t=r.width,u=r.height,i={x:0,y:0},s={x:1,y:1},d={x:10,y:10},f=this.container,h=f.scrollTop,v=f.scrollLeft,b=f.scrollHeight,B=f.scrollWidth,m=f.clientHeight,S=f.clientWidth,w=h===0,I=b-h-m===0,A=v===0,L=B-v-S===0;a.y>=l.y-u/2&&!I?(i.y=1,s.y=d.y*Math.abs((l.y-u/2-a.y)/u)):a.x>=l.x-t/2&&!L?(i.x=1,s.x=d.x*Math.abs((l.x-t/2-a.x)/t)):a.y<=c.y+u/2&&!w?(i.y=-1,s.y=d.y*Math.abs((a.y-u/2-c.y)/u)):a.x<=c.x+t/2&&!A&&(i.x=-1,s.x=d.x*Math.abs((a.x-t/2-c.x)/t)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(i.x!==0||i.y!==0)&&(this.interval=setInterval(function(){o.isAutoScrolling=!0;var p={left:s.x*i.x,top:s.y*i.y};o.container.scrollTop+=p.top,o.container.scrollLeft+=p.left,o.onScrollCallback(p)},5))}}]),e}();function Tr(e){var n=e.node;return{height:n.offsetHeight,width:n.offsetWidth}}function Gr(e){var n=[pe.Input,pe.Textarea,pe.Select,pe.Option,pe.Button];return!!(n.indexOf(e.target.tagName)!==-1||Re(e.target,function(r){return r.contentEditable==="true"}))}var wn={axis:x.default.oneOf(["x","y","xy"]),contentWindow:x.default.any,disableAutoscroll:x.default.bool,distance:x.default.number,getContainer:x.default.func,getHelperDimensions:x.default.func,helperClass:x.default.string,helperContainer:x.default.oneOfType([x.default.func,typeof HTMLElement>"u"?x.default.any:x.default.instanceOf(HTMLElement)]),hideSortableGhost:x.default.bool,keyboardSortingTransitionDuration:x.default.number,lockAxis:x.default.string,lockOffset:x.default.oneOfType([x.default.number,x.default.string,x.default.arrayOf(x.default.oneOfType([x.default.number,x.default.string]))]),lockToContainerEdges:x.default.bool,onSortEnd:x.default.func,onSortMove:x.default.func,onSortOver:x.default.func,onSortStart:x.default.func,pressDelay:x.default.number,pressThreshold:x.default.number,keyCodes:x.default.shape({lift:x.default.arrayOf(x.default.number),drop:x.default.arrayOf(x.default.number),cancel:x.default.arrayOf(x.default.number),up:x.default.arrayOf(x.default.number),down:x.default.arrayOf(x.default.number)}),shouldCancelStart:x.default.func,transitionDuration:x.default.number,updateBeforeSortStart:x.default.func,useDragHandle:x.default.bool,useWindowAsScrollContainer:x.default.bool},In={lift:[fe.SPACE],drop:[fe.SPACE],cancel:[fe.ESC],up:[fe.UP,fe.LEFT],down:[fe.DOWN,fe.RIGHT]},Er={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Tr,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:In,shouldCancelStart:Gr,transitionDuration:300,useWindowAsScrollContainer:!1},Nr=Object.keys(wn);function Wr(e){(0,se.default)(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function kr(e,n){try{var r=e()}catch(o){return n(!0,o)}return r&&r.then?r.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}var Cn=(0,V.createContext)({manager:{}});function An(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=function(a){Qe(c,a);function c(l){var t;we(this,c),t=Ke(this,Ce(c).call(this,l)),W(O(O(t)),"state",{}),W(O(O(t)),"handleStart",function(i){var s=t.props,d=s.distance,f=s.shouldCancelStart;if(!(i.button===2||f(i))){t.touched=!0,t.position=Be(i);var h=Re(i.target,function(w){return w.sortableInfo!=null});if(h&&h.sortableInfo&&t.nodeIsChild(h)&&!t.state.sorting){var v=t.props.useDragHandle,b=h.sortableInfo,B=b.index,m=b.collection,S=b.disabled;if(S||v&&!Re(i.target,mn))return;t.manager.active={collection:m,index:B},!xr(i)&&i.target.tagName===pe.Anchor&&i.preventDefault(),d||(t.props.pressDelay===0?t.handlePress(i):t.pressTimer=setTimeout(function(){return t.handlePress(i)},t.props.pressDelay))}}}),W(O(O(t)),"nodeIsChild",function(i){return i.sortableInfo.manager===t.manager}),W(O(O(t)),"handleMove",function(i){var s=t.props,d=s.distance,f=s.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var h=Be(i),v={x:t.position.x-h.x,y:t.position.y-h.y},b=Math.abs(v.x)+Math.abs(v.y);t.delta=v,!d&&(!f||b>=f)?(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0)):d&&b>=d&&t.manager.isActive()&&t.handlePress(i)}}),W(O(O(t)),"handleEnd",function(){t.touched=!1,t.cancel()}),W(O(O(t)),"cancel",function(){var i=t.props.distance,s=t.state.sorting;s||(i||clearTimeout(t.pressTimer),t.manager.active=null)}),W(O(O(t)),"handlePress",function(i){try{var s=t.manager.getActive(),d=function(){if(s){var f=function(){var P=A.sortableInfo.index,k=vr(A),Z=Ar(t.container),F=t.scrollContainer.getBoundingClientRect(),ce=b({index:P,node:A,collection:L});if(t.node=A,t.margin=k,t.gridGap=Z,t.width=ce.width,t.height=ce.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=A.getBoundingClientRect(),t.containerBoundingRect=F,t.index=P,t.newIndex=P,t.axis={x:v.indexOf("x")>=0,y:v.indexOf("y")>=0},t.offsetEdge=et(A,t.container),p?t.initialOffset=Be(Je({},i,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top})):t.initialOffset=Be(i),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(Sr(A)),$e(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-k.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-k.top,"px"),width:"".concat(t.width,"px")}),p&&t.helper.focus(),m&&(t.sortableGhost=A,$e(A,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},p){var be=I?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,Ye=be.top,He=be.left,lt=be.width,ct=be.height,ut=Ye+ct,dt=He+lt;t.axis.x&&(t.minTranslate.x=He-t.boundingClientRect.left,t.maxTranslate.x=dt-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=Ye-t.boundingClientRect.top,t.maxTranslate.y=ut-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(I?0:F.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(I?t.contentWindow.innerWidth:F.left+F.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(I?0:F.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(I?t.contentWindow.innerHeight:F.top+F.height)-t.boundingClientRect.top-t.height/2);B&&B.split(" ").forEach(function(ue){return t.helper.classList.add(ue)}),t.listenerNode=i.touches?i.target:t.contentWindow,p?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(Ae.move.forEach(function(ue){return t.listenerNode.addEventListener(ue,t.handleSortMove,!1)}),Ae.end.forEach(function(ue){return t.listenerNode.addEventListener(ue,t.handleSortEnd,!1)})),t.setState({sorting:!0,sortingIndex:P}),w&&w({node:A,index:P,collection:L,isKeySorting:p,nodes:t.manager.getOrderedRefs(),helper:t.helper},i),p&&t.keyMove(0)},h=t.props,v=h.axis,b=h.getHelperDimensions,B=h.helperClass,m=h.hideSortableGhost,S=h.updateBeforeSortStart,w=h.onSortStart,I=h.useWindowAsScrollContainer,A=s.node,L=s.collection,p=t.manager.isKeySorting,E=function(){if(typeof S=="function"){t._awaitingUpdateBeforeSortStart=!0;var C=kr(function(){var P=A.sortableInfo.index;return Promise.resolve(S({collection:L,index:P,node:A,isKeySorting:p},i)).then(function(){})},function(P,k){if(t._awaitingUpdateBeforeSortStart=!1,P)throw k;return k});if(C&&C.then)return C.then(function(){})}}();return E&&E.then?E.then(f):f(E)}}();return Promise.resolve(d&&d.then?d.then(function(){}):void 0)}catch(f){return Promise.reject(f)}}),W(O(O(t)),"handleSortMove",function(i){var s=t.props.onSortMove;typeof i.preventDefault=="function"&&i.cancelable&&i.preventDefault(),t.updateHelperPosition(i),t.animateNodes(),t.autoscroll(),s&&s(i)}),W(O(O(t)),"handleSortEnd",function(i){var s=t.props,d=s.hideSortableGhost,f=s.onSortEnd,h=t.manager,v=h.active.collection,b=h.isKeySorting,B=t.manager.getOrderedRefs();t.listenerNode&&(b?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(Ae.move.forEach(function(A){return t.listenerNode.removeEventListener(A,t.handleSortMove)}),Ae.end.forEach(function(A){return t.listenerNode.removeEventListener(A,t.handleSortEnd)}))),t.helper.parentNode.removeChild(t.helper),d&&t.sortableGhost&&$e(t.sortableGhost,{opacity:"",visibility:""});for(var m=0,S=B.length;m<S;m++){var w=B[m],I=w.node;w.edgeOffset=null,w.boundingClientRect=null,qe(I,null),mt(I,null),w.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),typeof f=="function"&&f({collection:v,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:b,nodes:B},i),t.touched=!1}),W(O(O(t)),"autoscroll",function(){var i=t.props.disableAutoscroll,s=t.manager.isKeySorting;if(i){t.autoScroller.clear();return}if(s){var d=Je({},t.translate),f=0,h=0;t.axis.x&&(d.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),f=t.translate.x-d.x),t.axis.y&&(d.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),h=t.translate.y-d.y),t.translate=d,qe(t.helper,t.translate),t.scrollContainer.scrollLeft+=f,t.scrollContainer.scrollTop+=h;return}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}),W(O(O(t)),"onAutoScroll",function(i){t.translate.x+=i.left,t.translate.y+=i.top,t.animateNodes()}),W(O(O(t)),"handleKeyDown",function(i){var s=i.keyCode,d=t.props,f=d.shouldCancelStart,h=d.keyCodes,v=h===void 0?{}:h,b=Je({},In,v);t.manager.active&&!t.manager.isKeySorting||!t.manager.active&&(!b.lift.includes(s)||f(i)||!t.isValidSortingTarget(i))||(i.stopPropagation(),i.preventDefault(),b.lift.includes(s)&&!t.manager.active?t.keyLift(i):b.drop.includes(s)&&t.manager.active?t.keyDrop(i):b.cancel.includes(s)?(t.newIndex=t.manager.active.index,t.keyDrop(i)):b.up.includes(s)?t.keyMove(-1):b.down.includes(s)&&t.keyMove(1))}),W(O(O(t)),"keyLift",function(i){var s=i.target,d=Re(s,function(b){return b.sortableInfo!=null}),f=d.sortableInfo,h=f.index,v=f.collection;t.initialFocusedNode=s,t.manager.isKeySorting=!0,t.manager.active={index:h,collection:v},t.handlePress(i)}),W(O(O(t)),"keyMove",function(i){var s=t.manager.getOrderedRefs(),d=s[s.length-1].node.sortableInfo.index,f=t.newIndex+i,h=t.newIndex;if(!(f<0||f>d)){t.prevIndex=h,t.newIndex=f;var v=wr(t.newIndex,t.prevIndex,t.index),b=s.find(function(p){var E=p.node;return E.sortableInfo.index===v}),B=b.node,m=t.containerScrollDelta,S=b.boundingClientRect||yt(B,m),w=b.translate||{x:0,y:0},I={top:S.top+w.y-m.top,left:S.left+w.x-m.left},A=h<f,L={x:A&&t.axis.x?B.offsetWidth-t.width:0,y:A&&t.axis.y?B.offsetHeight-t.height:0};t.handleSortMove({pageX:I.left+L.x,pageY:I.top+L.y,ignoreTransition:i===0})}}),W(O(O(t)),"keyDrop",function(i){t.handleSortEnd(i),t.initialFocusedNode&&t.initialFocusedNode.focus()}),W(O(O(t)),"handleKeyEnd",function(i){t.manager.active&&t.keyDrop(i)}),W(O(O(t)),"isValidSortingTarget",function(i){var s=t.props.useDragHandle,d=i.target,f=Re(d,function(h){return h.sortableInfo!=null});return f&&f.sortableInfo&&!f.sortableInfo.disabled&&(s?mn(d):d.sortableInfo)});var u=new yr;return Wr(l),t.manager=u,t.wrappedInstance=(0,V.createRef)(),t.sortableContextValue={manager:u},t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return Ie(c,[{key:"componentDidMount",value:function(){var t=this,u=this.props.useWindowAsScrollContainer,i=this.getContainer();Promise.resolve(i).then(function(s){t.container=s,t.document=t.container.ownerDocument||document;var d=t.props.contentWindow||t.document.defaultView||window;t.contentWindow=typeof d=="function"?d():d,t.scrollContainer=u?t.document.scrollingElement||t.document.documentElement:vn(t.container)||t.container,t.autoScroller=new Or(t.scrollContainer,t.onAutoScroll),Object.keys(t.events).forEach(function(f){return Ae[f].forEach(function(h){return t.container.addEventListener(h,t.events[f],!1)})}),t.container.addEventListener("keydown",t.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var t=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(u){return Ae[u].forEach(function(i){return t.container.removeEventListener(i,t.events[u])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(t){var u=this.props,i=u.lockAxis,s=u.lockOffset,d=u.lockToContainerEdges,f=u.transitionDuration,h=u.keyboardSortingTransitionDuration,v=h===void 0?f:h,b=this.manager.isKeySorting,B=t.ignoreTransition,m=Be(t),S={x:m.x-this.initialOffset.x,y:m.y-this.initialOffset.y};if(S.y-=window.pageYOffset-this.initialWindowScroll.top,S.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=S,d){var w=Ir({height:this.height,lockOffset:s,width:this.width}),I=gt(w,2),A=I[0],L=I[1],p={x:this.width/2-A.x,y:this.height/2-A.y},E={x:this.width/2-L.x,y:this.height/2-L.y};S.x=hn(this.minTranslate.x+p.x,this.maxTranslate.x-E.x,S.x),S.y=hn(this.minTranslate.y+p.y,this.maxTranslate.y-E.y,S.y)}i==="x"?S.y=0:i==="y"&&(S.x=0),b&&v&&!B&&mt(this.helper,v),qe(this.helper,S)}},{key:"animateNodes",value:function(){var t=this.props,u=t.transitionDuration,i=t.hideSortableGhost,s=t.onSortOver,d=this.containerScrollDelta,f=this.windowScrollDelta,h=this.manager.getOrderedRefs(),v={left:this.offsetEdge.left+this.translate.x+d.left,top:this.offsetEdge.top+this.translate.y+d.top},b=this.manager.isKeySorting,B=this.newIndex;this.newIndex=null;for(var m=0,S=h.length;m<S;m++){var w=h[m].node,I=w.sortableInfo.index,A=w.offsetWidth,L=w.offsetHeight,p={height:this.height>L?L/2:this.height/2,width:this.width>A?A/2:this.width/2},E=b&&I>this.index&&I<=B,C=b&&I<this.index&&I>=B,P={x:0,y:0},k=h[m].edgeOffset;k||(k=et(w,this.container),h[m].edgeOffset=k,b&&(h[m].boundingClientRect=yt(w,d)));var Z=m<h.length-1&&h[m+1],F=m>0&&h[m-1];if(Z&&!Z.edgeOffset&&(Z.edgeOffset=et(Z.node,this.container),b&&(Z.boundingClientRect=yt(Z.node,d))),I===this.index){i&&(this.sortableGhost=w,$e(w,{opacity:0,visibility:"hidden"}));continue}u&&mt(w,u),this.axis.x?this.axis.y?C||I<this.index&&(v.left+f.left-p.width<=k.left&&v.top+f.top<=k.top+p.height||v.top+f.top+p.height<=k.top)?(P.x=this.width+this.marginOffset.x,k.left+P.x>this.containerBoundingRect.width-p.width&&Z&&(P.x=Z.edgeOffset.left-k.left,P.y=Z.edgeOffset.top-k.top),this.newIndex===null&&(this.newIndex=I)):(E||I>this.index&&(v.left+f.left+p.width>=k.left&&v.top+f.top+p.height>=k.top||v.top+f.top+p.height>=k.top+L))&&(P.x=-(this.width+this.marginOffset.x),k.left+P.x<this.containerBoundingRect.left+p.width&&F&&(P.x=F.edgeOffset.left-k.left,P.y=F.edgeOffset.top-k.top),this.newIndex=I):E||I>this.index&&v.left+f.left+p.width>=k.left?(P.x=-(this.width+this.marginOffset.x),this.newIndex=I):(C||I<this.index&&v.left+f.left<=k.left+p.width)&&(P.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=I)):this.axis.y&&(E||I>this.index&&v.top+f.top+p.height>=k.top?(P.y=-(this.height+this.marginOffset.y),this.newIndex=I):(C||I<this.index&&v.top+f.top<=k.top+p.height)&&(P.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=I))),qe(w,P),h[m].translate=P}this.newIndex==null&&(this.newIndex=this.index),b&&(this.newIndex=B);var ce=b?this.prevIndex:B;s&&this.newIndex!==ce&&s({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:ce,isKeySorting:b,nodes:h,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return(0,se.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var t=this.props.getContainer;return typeof t!="function"?(0,tt.findDOMNode)(this):t(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,V.createElement)(Cn.Provider,{value:this.sortableContextValue},(0,V.createElement)(e,xe({ref:t},yn(this.props,Nr))))}},{key:"helperContainer",get:function(){var t=this.props.helperContainer;return typeof t=="function"?t():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var t=this.props.useWindowAsScrollContainer;return t?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),c}(V.Component),W(n,"displayName",bt("sortableList",e)),W(n,"defaultProps",Er),W(n,"propTypes",wn),r}var Sn={index:x.default.number.isRequired,collection:x.default.oneOfType([x.default.number,x.default.string]),disabled:x.default.bool},Br=Object.keys(Sn);function On(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=function(a){Qe(c,a);function c(){var l,t;we(this,c);for(var u=arguments.length,i=new Array(u),s=0;s<u;s++)i[s]=arguments[s];return t=Ke(this,(l=Ce(c)).call.apply(l,[this].concat(i))),W(O(O(t)),"wrappedInstance",(0,V.createRef)()),t}return Ie(c,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(t){this.node&&(t.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),t.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),t.collection!==this.props.collection&&(this.unregister(t.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var t=this.props,u=t.collection,i=t.disabled,s=t.index,d=(0,tt.findDOMNode)(this);d.sortableInfo={collection:u,disabled:i,index:s,manager:this.context.manager},this.node=d,this.ref={node:d},this.context.manager.add(u,this.ref)}},{key:"unregister",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(t,this.ref)}},{key:"getWrappedInstance",value:function(){return(0,se.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,V.createElement)(e,xe({ref:t},yn(this.props,Br)))}}]),c}(V.Component),W(n,"displayName",bt("sortableElement",e)),W(n,"contextType",Cn),W(n,"propTypes",Sn),W(n,"defaultProps",{collection:0}),r}var me=j(ie(),1);var En=new Set,z=new WeakMap,Te=new WeakMap,he=new WeakMap,xt=new WeakMap,Rr=new WeakMap,Ge=new WeakMap,nt=new WeakMap,Pe=new WeakSet,le,It=0,Ct=0,te="__aa_tgt",De="__aa_del",rt="__aa_new",Pr=e=>{let n=Yr(e);n&&n.forEach(r=>Hr(r))},Dr=e=>{e.forEach(n=>{n.target===le&&Mr(),z.has(n.target)&&ge(n.target)})};function Xr(e){let n=xt.get(e);n?.disconnect();let r=z.get(e),o=0,a=5;r||(r=Ee(e),z.set(e,r));let{offsetWidth:c,offsetHeight:l}=le,u=[r.top-a,c-(r.left+a+r.width),l-(r.top+a+r.height),r.left-a].map(s=>`${-1*Math.floor(s)}px`).join(" "),i=new IntersectionObserver(()=>{++o>1&&ge(e)},{root:le,threshold:1,rootMargin:u});i.observe(e),xt.set(e,i)}function ge(e){clearTimeout(nt.get(e));let n=ot(e),r=Xe(n)?500:n.duration;nt.set(e,setTimeout(async()=>{let o=he.get(e);try{await o?.finished,z.set(e,Ee(e)),Xr(e)}catch{}},r))}function Mr(){clearTimeout(nt.get(le)),nt.set(le,setTimeout(()=>{En.forEach(e=>Bn(e,n=>Nn(()=>ge(n))))},100))}function Lr(e){setTimeout(()=>{Rr.set(e,setInterval(()=>Nn(ge.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function Nn(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}var wt,Oe,jr=typeof window<"u"&&"ResizeObserver"in window;jr&&(le=document.documentElement,wt=new MutationObserver(Pr),Oe=new ResizeObserver(Dr),window.addEventListener("scroll",()=>{Ct=window.scrollY,It=window.scrollX}),Oe.observe(le));function Yr(e){return e.reduce((o,a)=>[...o,...Array.from(a.addedNodes),...Array.from(a.removedNodes)],[]).every(o=>o.nodeName==="#comment")?!1:e.reduce((o,a)=>{if(o===!1)return!1;if(a.target instanceof Element){if(vt(a.target),!o.has(a.target)){o.add(a.target);for(let c=0;c<a.target.children.length;c++){let l=a.target.children.item(c);if(l){if(De in l)return!1;vt(a.target,l),o.add(l)}}}if(a.removedNodes.length)for(let c=0;c<a.removedNodes.length;c++){let l=a.removedNodes[c];if(De in l)return!1;l instanceof Element&&(o.add(l),vt(a.target,l),Te.set(l,[a.previousSibling,a.nextSibling]))}}return o},new Set)}function vt(e,n){!n&&!(te in e)?Object.defineProperty(e,te,{value:e}):n&&!(te in n)&&Object.defineProperty(n,te,{value:e})}function Hr(e){var n;let r=e.isConnected,o=z.has(e);r&&Te.has(e)&&Te.delete(e),he.has(e)&&((n=he.get(e))===null||n===void 0||n.cancel()),rt in e?Tn(e):o&&r?Vr(e):o&&!r?zr(e):Tn(e)}function Q(e){return Number(e.replace(/[^0-9.\-]/g,""))}function Fr(e){let n=e.parentElement;for(;n;){if(n.scrollLeft||n.scrollTop)return{x:n.scrollLeft,y:n.scrollTop};n=n.parentElement}return{x:0,y:0}}function Ee(e){let n=e.getBoundingClientRect(),{x:r,y:o}=Fr(e);return{top:n.top+o,left:n.left+r,width:n.width,height:n.height}}function Wn(e,n,r){let o=n.width,a=n.height,c=r.width,l=r.height,t=getComputedStyle(e);if(t.getPropertyValue("box-sizing")==="content-box"){let i=Q(t.paddingTop)+Q(t.paddingBottom)+Q(t.borderTopWidth)+Q(t.borderBottomWidth),s=Q(t.paddingLeft)+Q(t.paddingRight)+Q(t.borderRightWidth)+Q(t.borderLeftWidth);o-=s,c-=s,a-=i,l-=i}return[o,c,a,l].map(Math.round)}function ot(e){return te in e&&Ge.has(e[te])?Ge.get(e[te]):{duration:250,easing:"ease-in-out"}}function kn(e){if(te in e)return e[te]}function At(e){let n=kn(e);return n?Pe.has(n):!1}function Bn(e,...n){n.forEach(r=>r(e,Ge.has(e)));for(let r=0;r<e.children.length;r++){let o=e.children.item(r);o&&n.forEach(a=>a(o,Ge.has(o)))}}function St(e){return Array.isArray(e)?e:[e]}function Xe(e){return typeof e=="function"}function Vr(e){let n=z.get(e),r=Ee(e);if(!At(e))return z.set(e,r);let o;if(!n)return;let a=ot(e);if(typeof a!="function"){let c=n.left-r.left,l=n.top-r.top,[t,u,i,s]=Wn(e,n,r),d={transform:`translate(${c}px, ${l}px)`},f={transform:"translate(0, 0)"};t!==u&&(d.width=`${t}px`,f.width=`${u}px`),i!==s&&(d.height=`${i}px`,f.height=`${s}px`),o=e.animate([d,f],{duration:a.duration,easing:a.easing})}else{let[c]=St(a(e,"remain",n,r));o=new Animation(c),o.play()}he.set(e,o),z.set(e,r),o.addEventListener("finish",ge.bind(null,e))}function Tn(e){rt in e&&delete e[rt];let n=Ee(e);z.set(e,n);let r=ot(e);if(!At(e))return;let o;if(typeof r!="function")o=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:r.duration*1.5,easing:"ease-in"});else{let[a]=St(r(e,"add",n));o=new Animation(a),o.play()}he.set(e,o),o.addEventListener("finish",ge.bind(null,e))}function Gn(e,n){var r;e.remove(),z.delete(e),Te.delete(e),he.delete(e),(r=xt.get(e))===null||r===void 0||r.disconnect(),setTimeout(()=>{if(De in e&&delete e[De],Object.defineProperty(e,rt,{value:!0,configurable:!0}),n&&e instanceof HTMLElement)for(let o in n)e.style[o]=""},0)}function zr(e){var n;if(!Te.has(e)||!z.has(e))return;let[r,o]=Te.get(e);Object.defineProperty(e,De,{value:!0,configurable:!0});let a=window.scrollX,c=window.scrollY;if(o&&o.parentNode&&o.parentNode instanceof Element?o.parentNode.insertBefore(e,o):r&&r.parentNode?r.parentNode.appendChild(e):(n=kn(e))===null||n===void 0||n.appendChild(e),!At(e))return Gn(e);let[l,t,u,i]=Zr(e),s=ot(e),d=z.get(e);(a!==It||c!==Ct)&&Ur(e,a,c,s);let f,h={position:"absolute",top:`${l}px`,left:`${t}px`,width:`${u}px`,height:`${i}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!Xe(s))Object.assign(e.style,h),f=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:s.duration,easing:"ease-out"});else{let[v,b]=St(s(e,"remove",d));b?.styleReset!==!1&&(h=b?.styleReset||h,Object.assign(e.style,h)),f=new Animation(v),f.play()}he.set(e,f),f.addEventListener("finish",Gn.bind(null,e,h))}function Ur(e,n,r,o){let a=It-n,c=Ct-r,l=document.documentElement.style.scrollBehavior;if(getComputedStyle(le).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+a,window.scrollY+c),!e.parentElement)return;let u=e.parentElement,i=u.clientHeight,s=u.clientWidth,d=performance.now();function f(){requestAnimationFrame(()=>{if(!Xe(o)){let h=i-u.clientHeight,v=s-u.clientWidth;d+o.duration>performance.now()?(window.scrollTo({left:window.scrollX-v,top:window.scrollY-h}),i=u.clientHeight,s=u.clientWidth,f()):document.documentElement.style.scrollBehavior=l}})}f()}function Zr(e){let n=z.get(e),[r,,o]=Wn(e,n,Ee(e)),a=e.parentElement;for(;a&&(getComputedStyle(a).position==="static"||a instanceof HTMLBodyElement);)a=a.parentElement;a||(a=document.body);let c=getComputedStyle(a),l=z.get(a)||Ee(a),t=Math.round(n.top-l.top)-Q(c.borderTopWidth),u=Math.round(n.left-l.left)-Q(c.borderLeftWidth);return[t,u,r,o]}function Rn(e,n={}){return wt&&Oe&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!Xe(n)&&!n.disrespectUserMotionPreference||(Pe.add(e),getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),Bn(e,ge,Lr,a=>Oe?.observe(a)),Xe(n)?Ge.set(e,n):Ge.set(e,{duration:250,easing:"ease-in-out",...n}),wt.observe(e,{childList:!0}),En.add(e))),Object.freeze({parent:e,enable:()=>{Pe.add(e)},disable:()=>{Pe.delete(e)},isEnabled:()=>Pe.has(e)})}function Ot(e){let[n,r]=(0,me.useState)(),o=(0,me.useMemo)(()=>e,[]),a=(0,me.useCallback)(l=>{l instanceof HTMLElement?r(Rn(l,o)):r(void 0)},[o]),c=(0,me.useCallback)(l=>{n&&(l?n.enable():n.disable())},[n]);return[a,c]}var Dn=j(pt());function Jr(e,n,r){let o=n<0?e.length+n:n;if(o>=0&&o<e.length){let a=r<0?e.length+r:r,[c]=e.splice(n,1);e.splice(a,0,c)}}function Pn(e,n,r){return e=[...e],Jr(e,n,r),e}var it=j(We());var U={simpleWrapperTwoButtons:"mireo91-repeatablefields-xY17aG-simpleWrapperTwoButtons",simpleWrapperOneButton:"mireo91-repeatablefields-xY17aG-simpleWrapperOneButton",buttons:"mireo91-repeatablefields-xY17aG-buttons",simpleButtons:"mireo91-repeatablefields-xY17aG-simpleButtons",property:"mireo91-repeatablefields-xY17aG-property",move:"mireo91-repeatablefields-xY17aG-move",group:"mireo91-repeatablefields-xY17aG-group",delete:"mireo91-repeatablefields-xY17aG-delete",simpleWrapper:"mireo91-repeatablefields-xY17aG-simpleWrapper",noSelect:"mireo91-repeatablefields-xY17aG-noSelect",wrapper:"mireo91-repeatablefields-xY17aG-wrapper"};var Tt=xn(()=>K.default.createElement("span",{type:"button",className:U.move},K.default.createElement(Dn.Icon,{icon:"sort"}))),Xn={disrespectUserMotionPreferences:!0},Kr=On(({value:e})=>K.default.createElement("div",null,e)),_r=An(({children:e,automaticSorting:n,manualSort:r})=>{let[o,a]=Ot(Xn);return(0,K.useEffect)(()=>{document.body.style.cursor=r?"grabbing":null,a(!1);let c=setTimeout(()=>{a(!r)},500);return()=>clearTimeout(c)},[r]),K.default.createElement("div",{className:r&&U.noSelect,ref:n?o:null},e)});function Gt({onChange:e,value:n,element:r,items:o,enable:a,automaticSorting:c,KEY_PROPERTY:l}){if(!a){let[s]=Ot(Xn);return K.default.createElement("div",{ref:c?s:null},o.map((d,f)=>K.default.createElement("div",{key:d[l]},r(f))))}let[t,u]=(0,K.useState)(!1);function i({oldIndex:s,newIndex:d}){e(Pn(n,s,d)),u(!1)}return K.default.createElement(_r,{onSortStart:()=>u(!0),manualSort:t,onSortEnd:i,automaticSorting:c,useDragHandle:!0,axis:"y",lockAxis:"y"},o.map((s,d)=>K.default.createElement(Kr,{key:s[l],index:d,value:r(d)})))}Gt.propTypes={items:it.default.array.isRequired,onSortEndAction:it.default.func.isRequired,element:it.default.func.isRequired};var Mn=j(ie()),H=j(We()),Ln=j(ze()),Qr=window["@Neos:HostPluginAPI"]["@NeosProjectPackages"]().NeosUiEditors.EditorEnvelope;function jn({commit:e,editorId:n,editorOptions:r,id:o,...a}){function c(l,t){let{property:u,hooksRegistry:i}=a;if(t){Object.keys(t).map(s=>{i.get(s)(l,t[s]).then(f=>{let h=omit(f,["__type"]);e(o,u,h)})});return}e(o,u,l)}return Mn.default.createElement(Qr,{...a,commit:c,options:r||{},id:`${n}-${o}`})}jn.propTypes={identifier:H.default.string.isRequired,label:H.default.string.isRequired,options:H.default.object,value:H.default.any,renderSecondaryInspector:H.default.func,editor:H.default.string.isRequired,editorRegistry:H.default.object.isRequired,i18nRegistry:H.default.object.isRequired,validationErrors:H.default.array,onEnterKey:H.default.func,helpMessage:H.default.string,helpThumbnail:H.default.string,highlight:H.default.bool,property:H.default.string.isRequired,id:H.default.number.isRequired,commit:H.default.func.isRequired};var $r=(0,Ln.neos)(e=>({hooksRegistry:e.get("inspector").get("saveHooks")})),Yn=$r(jn);function Hn(e,n,r){return e=eo(e),Et(r,n,e)}var ye=e=>JSON.parse(JSON.stringify(e)),Nt=(e,n)=>JSON.stringify(e)==JSON.stringify(n);function at(e){return typeof e=="number"?!0:typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}function st(e){return e?typeof e=="string"?e.includes("ClientEval:"):Array.isArray(e)?e.some(n=>st(n)):qr(e)?st(Object.values(e)):!1:!1}function Fn(e,n,r,o,a){if(typeof e=="string"&&e.startsWith("ItemEval:"))try{return new Function("item,node,parentNode,documentNode","return "+e.replace("ItemEval:",""))(n,r,o,a)}catch(c){return console.warn('An error occurred while trying to evaluate "'+e+`"
`,c),e}return e}function qr(e){return e!=null&&(e.constructor===Object||!e.constructor&&typeof e=="object")}function Vn(e,n){let r=ye(e);return!Array.isArray(r)||!r.length||!Array.isArray(n)||!n.length?r:r.sort((o,a)=>n.reduce((c,l)=>{if(c!==0)return c;let{property:t,order:u="asc"}=l,i=o[t],s=a[t],d=0;return at(i)&&at(s)?i>s?d=1:i<s&&(d=-1):d=i.localeCompare(s),u==="desc"&&(d*=-1),d},0))}function Me(e,n){let r=ye(e);for(let o in n)o in n&&(n[o]instanceof Object&&r[o]instanceof Object?r[o]=Me(r[o],n[o]):r[o]=n[o]);return r}function eo(e){return Array.isArray(e)?e:typeof e=="number"?[e]:e.split(".").map(n=>{let r=parseInt(n);return!isNaN(r)&&String(r)===n?r:n})}function Et(e,n,r){if(r.length===0)return n;if(typeof e>"u"&&(typeof r[0]=="number"?e=[]:e={}),Array.isArray(e)){typeof r[0]=="number"&&e.length<r[0]&&(r[0]=e.length);let o=[...e];return o[r[0]]=Et(e[r[0]],n,r.slice(1)),o}return Object.assign({},e,{[r[0]]:Et(e[r[0]],n,r.slice(1))})}var Le="_UUID_",to=e=>({contextNodePath:e.focusedNodePath,dataSourceIdentifier:e.options.dataSourceIdentifier,dataSourceUri:e.options.dataSourceUri,dataSourceAdditionalData:e.options.dataSourceAdditionalData,dataSourceDisableCaching:!!e.options.dataSourceDisableCaching});function Zn({commit:e,dataSourcesDataLoader:n,editorRegistry:r,i18nRegistry:o,id:a,validatorRegistry:c,value:l,renderHelpIcon:t,identifier:u,...i}){let{dataSourceIdentifier:s,dataSourceUri:d,dataSourceAdditionalData:f}=i.options,h=!!(s||d),v=o.translate(i.label),[b,B]=(0,G.useState)(!0),[m,S]=(0,G.useState)({}),[w,I]=(0,G.useState)(!0),[A,L]=(0,G.useState)(!0),[p,E]=(0,G.useState)([]),[C,P]=(0,G.useState)(h?null:i.options),[k,Z]=(0,G.useState)({}),[F,ce]=(0,G.useState)({}),be=()=>JSON.stringify(p),[Ye,He]=(0,G.useState)([]);(0,G.useEffect)(()=>{B(!0),Kt.get().endpoints.dataSource("get-property-types",null,{}).then(g=>{S(g),B(!1)})},[]),(0,G.useEffect)(()=>{let g=be();if(!(Ye===g||!C)&&(He(g),Kn(p),_n(p),C.sortBy)){let y=setTimeout(()=>{let R=Vn(p,C.sortBy);Ne(R)},2e3);return()=>clearTimeout(y)}},[p]),(0,G.useEffect)(()=>{if(!C||st(C))return;let g=dt();Z(g),ue(g)},[C,m]);let lt=()=>JSON.stringify({dataSourceIdentifier:s,dataSourceUri:d,dataSourceAdditionalData:f}),[ct,ut]=(0,G.useState)(null);(0,G.useEffect)(()=>{if(!h)return;let g=lt();ct!==g&&(B(!0),ut(g),n.resolveValue(to(i),p).then(y=>{P(Me(i.options,y)),B(!1)}))},[s,d,f]);function dt(){let g={},y=C.properties;if(y){let R=[];for(let X in y){let D=y[X];R.push({key:X,position:D?.position??null,item:D})}ft(R).forEach(({key:X,item:D})=>{let N=D&&D.defaultValue;g[X]=Fe(N,"")})}return g}function ue(g){let y=l?ye(l):[];y=y.map(N=>N[Le]?N:{...N,[Le]:Ht()});let{min:R,max:X}=C;if(R&&y.length<R)for(var D=0;D<R;++D)y[D]?y[D]=l[D]:y[D]=g;if(X&&y.length>X&&(y=y.slice(0,X)),y.length)for(let N=0;N<y.length;N++){let J=C.predefinedProperties?.[N]?.properties,M=ye(y[N]),de=Object.keys(M).filter($=>$==Le||$ in g).reduce(($,ve)=>{let Ve=J?.[ve]?.defaultValue!=null?J[ve].defaultValue:M[ve];return at(Ve)&&(Ve=parseFloat(Ve)),{...$,[ve]:Ve}},{});y[N]=de}E(y)}function Ne(g){if(Nt(g,p))return;let y=ye(g).map(R=>(delete R[Le],R));Nt(y,l)||e(y),E(g)}function Kn(g){C&&C.max&&I(C.max>g.length)}function _n(g){C&&C.min&&L(C.min<g.length)}function Qn(){Ne([...p,k])}function Wt(g){let y=p.filter((R,X)=>g!==X);Ne(y)}handleCollapse=g=>{let y=!F[g];ce({...F,[g]:y})};function $n(g,y,R){Ne(Hn(y,R,p))}function qn(g,y,R,X){if(!y||!y.validation)return;let D=y.validation,J=Object.keys(D).map(M=>{let re=D[M];return er(g,M,re)}).filter(M=>M);if(C.controls&&C.controls.add){let M=C?.max?C.max>p.length:!0;I(M&&J.length<=0)}return J}function er(g,y,R){let X=c.get(y);if(X)return X(g,R);console.warn(`Validator ${y} not found`)}function tr(g){let y=!!C.predefinedProperties&&C.predefinedProperties[g],{controls:R,sortBy:X,properties:D}=C,N=!y&&R.remove&&A,J=!y&&R.move&&p.length>1,M=N&&J,re=N||J;if(Object.keys(D).length===1)return G.default.createElement("div",{className:Vt(U.simpleWrapper,M?U.simpleWrapperTwoButtons:re&&U.simpleWrapperOneButton)},kt(g),re&&G.default.createElement("div",{class:U.simpleButtons},N&&G.default.createElement(ne.IconButton,{onClick:()=>Wt(g),className:U.delete,icon:"trash"}),J&&G.default.createElement(Tt,null)));let $=!!R.collapse;return G.default.createElement("div",{className:U.wrapper},!!(re||$)&&G.default.createElement("div",{class:U.buttons},J&&G.default.createElement(Tt,null),$&&G.default.createElement(ne.IconButton,{onClick:()=>handleCollapse(g),icon:F[g]?"chevron-down":"chevron-up"}),N&&G.default.createElement(ne.IconButton,{onClick:()=>Wt(g),className:U.delete,icon:"trash"})),!F[g]&&kt(g))}function kt(g){let{predefinedProperties:y}=C,R=y&&y[g]?y[g].label:null,X=[];return Object.keys(k).map(D=>{X.push(nr(D,g))}),X=X.filter(Boolean),X.length===0?null:G.default.createElement("div",{className:U.group},R&&G.default.createElement("span",{dangerouslySetInnerHTML:{__html:R}}),X)}function Bt(g){return g!=null}function Fe(g,y=""){return Bt(g)?g:y}function nr(g,y){let R=ye(p),{properties:X,predefinedProperties:D}=C,N=X[g];D&&D[y]&&D[y].properties&&D[y].properties[g]&&(N=Me(N,D[y].properties[g]));let J=N.type?m[N.type]:{};J&&(N=Me(J,N));let M=Fe(N.editorOptions,{}),re=Fe(N.editor,"Neos.Neos/Inspector/Editors/TextFieldEditor"),de=Fe(R[y][g]);!de&&Bt(N.defaultValue)&&(de=N.defaultValue),(M.hasOwnProperty("dataSourceUri")||M.hasOwnProperty("dataSourceIdentifier"))&&(M={...M},M.dataSourceAdditionalData?(M.dataSourceAdditionalData.hasOwnProperty("repeatableIndex")&&(M.dataSourceAdditionalData.repeatableIndex=y),M.dataSourceAdditionalData.hasOwnProperty("repeatableValue")&&(M.dataSourceAdditionalData.repeatableValue=p)):M.dataSourceAdditionalData={});let $=Object.keys(X).length<=1,ve=Fn(N.hidden,R[y],i.node,i.parentNode,i.documentNode);return G.default.createElement("div",{className:!$&&U.property,hidden:ve},G.default.createElement(Yn,{identifier:`${u}-repeatable-${y}-${g}`,options:M,value:de,renderSecondaryInspector:i.renderSecondaryInspector,editor:re,editorRegistry:r,i18nRegistry:o,validationErrors:qn(de,N,y,g),highlight:!1,property:`${y}.${g}`,id:`repeatable-${y}-${g}`,editorId:a,commit:$n,...N}))}if(b||!C)return G.default.createElement(G.default.Fragment,null,!!v&&G.default.createElement(ne.Label,{htmlFor:a},v," ",t()),G.default.createElement(qt,{id:a,isLoading:b,heightMultiplier:2}));if(C.hidden)return null;let{buttonAddLabel:rr="Mireo.RepeatableFields:Main:addRow"}=C;return G.default.createElement(G.default.Fragment,null,!!v&&G.default.createElement(ne.Label,{htmlFor:a},v," ",t()),G.default.createElement(Gt,{element:tr,items:p,onChange:Ne,enable:C.controls?.move,automaticSorting:C.sortBy,value:p,KEY_PROPERTY:Le}),C.controls.add&&w&&G.default.createElement(G.default.Fragment,null,G.default.createElement(ne.Button,{onClick:Qn,id:a},o.translate(rr)),!!v||t()))}Zn.propTypes={identifier:T.default.string.isRequired,label:T.default.string.isRequired,value:T.default.arrayOf(T.default.object),renderSecondaryInspector:T.default.func,editor:T.default.string.isRequired,editorRegistry:T.default.object.isRequired,i18nRegistry:T.default.object.isRequired,validationErrors:T.default.array,onEnterKey:T.default.func,helpMessage:T.default.string,helpThumbnail:T.default.string,highlight:T.default.bool,commit:T.default.func.isRequired,options:T.default.shape({hidden:T.default.bool,buttonAddLabel:T.default.string,dataSourceIdentifier:T.default.string,dataSourceUri:T.default.string,dataSourceDisableCaching:T.default.bool,dataSourceAdditionalData:T.default.objectOf(T.default.any),predefinedProperties:T.default.arrayOf(T.default.shape({label:T.default.string,value:T.default.object})),max:T.default.number,min:T.default.number,controls:T.default.shape({move:T.default.bool,remove:T.default.bool,add:T.default.bool,collapse:T.default.bool}),sortBy:T.default.arrayOf(T.default.shape({property:T.default.string,direction:T.default.oneOf(["asc","desc"])}))}).isRequired,dataSourcesDataLoader:T.default.shape({resolveValue:T.default.func.isRequired}).isRequired,focusedNodePath:T.default.string.isRequired};var no=(0,Un.neos)(e=>({editorRegistry:e.get("inspector").get("editors"),i18nRegistry:e.get("i18n"),dataSourcesDataLoader:e.get("dataLoaders").get("DataSources")})),ro=(0,zn.connect)(e=>({focusedNodePath:je.selectors.CR.Nodes.focusedNodePathSelector(e),node:je.selectors.CR.Nodes.focusedSelector(e),parentNode:je.selectors.CR.Nodes.focusedParentSelector(e),documentNode:je.selectors.CR.Nodes.documentNodeSelector(e)})),Jn=no(ro(Zn));Dt("Mireo.RepeatableFields:RepeatableField",{},e=>{e.get("inspector").get("editors").set("Mireo.RepeatableFields/Inspector/Editors/RepeatableFieldEditor",{component:Jn,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
