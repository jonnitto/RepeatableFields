(()=>{var jn=Object.create;var ht=Object.defineProperty;var Xn=Object.getOwnPropertyDescriptor;var Bn=Object.getOwnPropertyNames;var Ln=Object.getPrototypeOf,Vn=Object.prototype.hasOwnProperty;var Yn=(e,t)=>()=>(e&&(t=e(e=0)),t);var K=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Hn=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Bn(t))!Vn.call(e,a)&&a!==r&&ht(e,a,{get:()=>t[a],enumerable:!(o=Xn(t,a))||o.enumerable});return e};var V=(e,t,r)=>(r=e!=null?jn(Ln(e)):{},Hn(t||!e||!e.__esModule?ht(r,"default",{value:e,enumerable:!0}):r,e));function X(e){return(...t)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${e}`])return window["@Neos:HostPluginAPI"][`@${e}`](...t);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var U=Yn(()=>{});var ye=K((si,yt)=>{U();yt.exports=X("vendor")().React});var be=K((ci,bt)=>{U();bt.exports=X("vendor")().PropTypes});var At=K((Fi,St)=>{U();St.exports=X("vendor")().ReactDOM});var Gt=K((Zi,Ot)=>{"use strict";var Zn=function(e,t,r,o,a,s,c,n){if(!e){var p;if(t===void 0)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=[r,o,a,s,c,n],l=0;p=new Error(t.replace(/%s/g,function(){return i[l++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};Ot.exports=Zn});var et=K((ya,Zt)=>{U();Zt.exports=X("NeosProjectPackages")().NeosUiDecorators});var cn=K((ba,ln)=>{var fr=200,rt="__lodash_hash_undefined__",dr=1/0,Jt=9007199254740991,pr="[object Arguments]",hr="[object Function]",gr="[object GeneratorFunction]",mr="[object Symbol]",yr=/[\\^$.*+?()[\]{}|]/g,br=/^\[object .+?Constructor\]$/,vr=/^(?:0|[1-9]\d*)$/,xr=typeof global=="object"&&global&&global.Object===Object&&global,Ir=typeof self=="object"&&self&&self.Object===Object&&self,ot=xr||Ir||Function("return this")();function wr(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Cr(e,t){var r=e?e.length:0;return!!r&&Or(e,t,0)>-1}function Sr(e,t,r){for(var o=-1,a=e?e.length:0;++o<a;)if(r(t,e[o]))return!0;return!1}function qt(e,t){for(var r=-1,o=e?e.length:0,a=Array(o);++r<o;)a[r]=t(e[r],r,e);return a}function it(e,t){for(var r=-1,o=t.length,a=e.length;++r<o;)e[a+r]=t[r];return e}function Ar(e,t,r,o){for(var a=e.length,s=r+(o?1:-1);o?s--:++s<a;)if(t(e[s],s,e))return s;return-1}function Or(e,t,r){if(t!==t)return Ar(e,Gr,r);for(var o=r-1,a=e.length;++o<a;)if(e[o]===t)return o;return-1}function Gr(e){return e!==e}function Tr(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}function Er(e){return function(t){return e(t)}}function Rr(e,t){return e.has(t)}function Nr(e,t){return e?.[t]}function Pr(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function Qt(e,t){return function(r){return e(t(r))}}var kr=Array.prototype,Dr=Function.prototype,Fe=Object.prototype,tt=ot["__core-js_shared__"],Mt=function(){var e=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),$t=Dr.toString,pe=Fe.hasOwnProperty,at=Fe.toString,Wr=RegExp("^"+$t.call(pe).replace(yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=ot.Symbol,_r=Qt(Object.getPrototypeOf,Object),jr=Fe.propertyIsEnumerable,Xr=kr.splice,Ut=zt?zt.isConcatSpreadable:void 0,nt=Object.getOwnPropertySymbols,Kt=Math.max,Br=tn(ot,"Map"),Ce=tn(Object,"create");function re(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Lr(){this.__data__=Ce?Ce(null):{}}function Vr(e){return this.has(e)&&delete this.__data__[e]}function Yr(e){var t=this.__data__;if(Ce){var r=t[e];return r===rt?void 0:r}return pe.call(t,e)?t[e]:void 0}function Hr(e){var t=this.__data__;return Ce?t[e]!==void 0:pe.call(t,e)}function Fr(e,t){var r=this.__data__;return r[e]=Ce&&t===void 0?rt:t,this}re.prototype.clear=Lr;re.prototype.delete=Vr;re.prototype.get=Yr;re.prototype.has=Hr;re.prototype.set=Fr;function he(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Zr(){this.__data__=[]}function Mr(e){var t=this.__data__,r=Ze(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():Xr.call(t,r,1),!0}function zr(e){var t=this.__data__,r=Ze(t,e);return r<0?void 0:t[r][1]}function Ur(e){return Ze(this.__data__,e)>-1}function Kr(e,t){var r=this.__data__,o=Ze(r,e);return o<0?r.push([e,t]):r[o][1]=t,this}he.prototype.clear=Zr;he.prototype.delete=Mr;he.prototype.get=zr;he.prototype.has=Ur;he.prototype.set=Kr;function ge(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Jr(){this.__data__={hash:new re,map:new(Br||he),string:new re}}function qr(e){return Me(this,e).delete(e)}function Qr(e){return Me(this,e).get(e)}function $r(e){return Me(this,e).has(e)}function eo(e,t){return Me(this,e).set(e,t),this}ge.prototype.clear=Jr;ge.prototype.delete=qr;ge.prototype.get=Qr;ge.prototype.has=$r;ge.prototype.set=eo;function He(e){var t=-1,r=e?e.length:0;for(this.__data__=new ge;++t<r;)this.add(e[t])}function to(e){return this.__data__.set(e,rt),this}function no(e){return this.__data__.has(e)}He.prototype.add=He.prototype.push=to;He.prototype.has=no;function ro(e,t){var r=st(e)||nn(e)?Tr(e.length,String):[],o=r.length,a=!!o;for(var s in e)(t||pe.call(e,s))&&!(a&&(s=="length"||mo(s,o)))&&r.push(s);return r}function Ze(e,t){for(var r=e.length;r--;)if(Co(e[r][0],t))return r;return-1}function oo(e,t,r,o){var a=-1,s=Cr,c=!0,n=e.length,p=[],i=t.length;if(!n)return p;r&&(t=qt(t,Er(r))),o?(s=Sr,c=!1):t.length>=fr&&(s=Rr,c=!1,t=new He(t));e:for(;++a<n;){var l=e[a],f=r?r(l):l;if(l=o||l!==0?l:0,c&&f===f){for(var u=i;u--;)if(t[u]===f)continue e;p.push(l)}else s(t,f,o)||p.push(l)}return p}function en(e,t,r,o,a){var s=-1,c=e.length;for(r||(r=go),a||(a=[]);++s<c;){var n=e[s];t>0&&r(n)?t>1?en(n,t-1,r,o,a):it(a,n):o||(a[a.length]=n)}return a}function io(e,t,r){var o=t(e);return st(e)?o:it(o,r(e))}function ao(e){if(!lt(e)||bo(e))return!1;var t=on(e)||Pr(e)?Wr:br;return t.test(wo(e))}function so(e){if(!lt(e))return xo(e);var t=vo(e),r=[];for(var o in e)o=="constructor"&&(t||!pe.call(e,o))||r.push(o);return r}function lo(e,t){return e=Object(e),co(e,t,function(r,o){return o in e})}function co(e,t,r){for(var o=-1,a=t.length,s={};++o<a;){var c=t[o],n=e[c];r(n,c)&&(s[c]=n)}return s}function uo(e,t){return t=Kt(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=Kt(r.length-t,0),s=Array(a);++o<a;)s[o]=r[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=r[o];return c[t]=s,wr(e,this,c)}}function fo(e){return io(e,Go,ho)}function Me(e,t){var r=e.__data__;return yo(t)?r[typeof t=="string"?"string":"hash"]:r.map}function tn(e,t){var r=Nr(e,t);return ao(r)?r:void 0}var po=nt?Qt(nt,Object):sn,ho=nt?function(e){for(var t=[];e;)it(t,po(e)),e=_r(e);return t}:sn;function go(e){return st(e)||nn(e)||!!(Ut&&e&&e[Ut])}function mo(e,t){return t=t??Jt,!!t&&(typeof e=="number"||vr.test(e))&&e>-1&&e%1==0&&e<t}function yo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function bo(e){return!!Mt&&Mt in e}function vo(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Fe;return e===r}function xo(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function Io(e){if(typeof e=="string"||Oo(e))return e;var t=e+"";return t=="0"&&1/e==-dr?"-0":t}function wo(e){if(e!=null){try{return $t.call(e)}catch{}try{return e+""}catch{}}return""}function Co(e,t){return e===t||e!==e&&t!==t}function nn(e){return So(e)&&pe.call(e,"callee")&&(!jr.call(e,"callee")||at.call(e)==pr)}var st=Array.isArray;function rn(e){return e!=null&&Ao(e.length)&&!on(e)}function So(e){return an(e)&&rn(e)}function on(e){var t=lt(e)?at.call(e):"";return t==hr||t==gr}function Ao(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Jt}function lt(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function an(e){return!!e&&typeof e=="object"}function Oo(e){return typeof e=="symbol"||an(e)&&at.call(e)==mr}function Go(e){return rn(e)?ro(e,!0):so(e)}var To=uo(function(e,t){return e==null?{}:(t=qt(en(t,1),Io),lo(e,oo(fo(e),t)))});function sn(){return[]}ln.exports=To});var gn=K((Ia,hn)=>{U();hn.exports=X("vendor")().reactRedux});var yn=K((Ca,mn)=>{U();mn.exports=X("NeosProjectPackages")().NeosUiReduxStore});var vn=K((Aa,bn)=>{U();bn.exports=X("NeosProjectPackages")().ReactUiComponents});U();var mt=X("manifest");var x=V(ye()),w=V(be());var we=V(ye());function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},se.apply(null,arguments)}function vt(e){if(Array.isArray(e))return e}function xt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,a,s,c,n=[],p=!0,i=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;p=!1}else for(;!(p=(o=s.call(r)).done)&&(n.push(o.value),n.length!==t);p=!0);}catch(l){i=!0,a=l}finally{try{if(!p&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(i)throw a}}return n}}function ve(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function Ne(e,t){if(e){if(typeof e=="string")return ve(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ve(e,t):void 0}}function It(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Je(e,t){return vt(e)||xt(e,t)||Ne(e,t)||It()}function J(e){"@babel/helpers - typeof";return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(e)}function wt(e,t){if(J(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(J(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pe(e){var t=wt(e,"string");return J(t)=="symbol"?t:t+""}function A(e,t,r){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&o.push.apply(o,Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),o.forEach(function(a){A(e,a,r[a])})}return e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Pe(o.key),o)}}function ce(e,t,r){return t&&Ct(e.prototype,t),r&&Ct(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){if(t&&(J(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ue(e)}function We(e,t){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},We(e,t)}function _e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}var Y=V(ye()),Le=V(At()),Q=V(Gt());function Tt(e){if(Array.isArray(e))return ve(e)}function Et(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nt(e){return Tt(e)||Et(e)||Ne(e)||Rt()}var m=V(be()),Mn=function(){function e(){le(this,e),A(this,"refs",{})}return ce(e,[{key:"add",value:function(r,o){this.refs[r]||(this.refs[r]=[]),this.refs[r].push(o)}},{key:"remove",value:function(r,o){var a=this.getIndex(r,o);a!==-1&&this.refs[r].splice(a,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var r=this;return this.refs[this.active.collection].find(function(o){var a=o.node;return a.sortableInfo.index==r.active.index})}},{key:"getIndex",value:function(r,o){return this.refs[r].indexOf(o)}},{key:"getOrderedRefs",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[r].sort(zn)}}]),e}();function zn(e,t){var r=e.node.sortableInfo.index,o=t.node.sortableInfo.index;return r-o}function Wt(e,t){return Object.keys(e).reduce(function(r,o){return t.indexOf(o)===-1&&(r[o]=e[o]),r},{})}var fe={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},_t=function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function je(e,t){Object.keys(t).forEach(function(r){e.style[r]=t[r]})}function Xe(e,t){e.style["".concat(_t,"Transform")]=t==null?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function qe(e,t){e.style["".concat(_t,"TransitionDuration")]=t==null?"":"".concat(t,"ms")}function Ie(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function Pt(e,t,r){return Math.max(e,Math.min(r,t))}function de(e){return e.substr(-2)==="px"?parseFloat(e):0}function Un(e){var t=window.getComputedStyle(e);return{bottom:de(t.marginBottom),left:de(t.marginLeft),right:de(t.marginRight),top:de(t.marginTop)}}function $e(e,t){var r=t.displayName||t.name;return r?"".concat(e,"(").concat(r,")"):e}function Qe(e,t){var r=e.getBoundingClientRect();return{top:r.top+t.top,left:r.left+t.left}}function xe(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function Kn(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function Be(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(e){var o={left:r.left+e.offsetLeft,top:r.top+e.offsetTop};return e.parentNode===t?o:Be(e.parentNode,t,o)}}function Jn(e,t,r){return e<r&&e>t?e-1:e>r&&e<t?e+1:e}function kt(e){var t=e.lockOffset,r=e.width,o=e.height,a=t,s=t,c="px";if(typeof t=="string"){var n=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);(0,Q.default)(n!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),a=parseFloat(t),s=parseFloat(t),c=n[1]}return(0,Q.default)(isFinite(a)&&isFinite(s),"lockOffset value should be a finite. Given %s",t),c==="%"&&(a=a*r/100,s=s*o/100),{x:a,y:s}}function qn(e){var t=e.height,r=e.width,o=e.lockOffset,a=Array.isArray(o)?o:[o,o];(0,Q.default)(a.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var s=Je(a,2),c=s[0],n=s[1];return[kt({height:t,lockOffset:c,width:r}),kt({height:t,lockOffset:n,width:r})]}function Qn(e){var t=window.getComputedStyle(e),r=/(auto|scroll)/,o=["overflow","overflowX","overflowY"];return o.find(function(a){return r.test(t[a])})}function jt(e){return e instanceof HTMLElement?Qn(e)?e:jt(e.parentNode):null}function $n(e){var t=window.getComputedStyle(e);return t.display==="grid"?{x:de(t.gridColumnGap),y:de(t.gridRowGap)}:{x:0,y:0}}var te={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},ne={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function er(e){var t="input, textarea, select, canvas, [contenteditable]",r=e.querySelectorAll(t),o=e.cloneNode(!0),a=Nt(o.querySelectorAll(t));return a.forEach(function(s,c){if(s.type!=="file"&&(s.value=r[c].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===ne.Canvas&&r[c].width>0&&r[c].height>0){var n=s.getContext("2d");n.drawImage(r[c],0,0)}}),o}function Xt(e){var t,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=t=function(a){_e(s,a);function s(){var c,n;le(this,s);for(var p=arguments.length,i=new Array(p),l=0;l<p;l++)i[l]=arguments[l];return n=De(this,(c=ue(s)).call.apply(c,[this].concat(i))),A(b(b(n)),"wrappedInstance",(0,Y.createRef)()),n}return ce(s,[{key:"componentDidMount",value:function(){var n=(0,Le.findDOMNode)(this);n.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return(0,Q.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var n=o.withRef?this.wrappedInstance:null;return(0,Y.createElement)(e,se({ref:n},this.props))}}]),s}(Y.Component),A(t,"displayName",$e("sortableHandle",e)),r}function Dt(e){return e.sortableHandle!=null}var tr=function(){function e(t,r){le(this,e),this.container=t,this.onScrollCallback=r}return ce(e,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(r){var o=this,a=r.translate,s=r.minTranslate,c=r.maxTranslate,n=r.width,p=r.height,i={x:0,y:0},l={x:1,y:1},f={x:10,y:10},u=this.container,h=u.scrollTop,C=u.scrollLeft,y=u.scrollHeight,k=u.scrollWidth,O=u.clientHeight,P=u.clientWidth,T=h===0,I=y-h-O===0,E=C===0,G=k-C-P===0;a.y>=c.y-p/2&&!I?(i.y=1,l.y=f.y*Math.abs((c.y-p/2-a.y)/p)):a.x>=c.x-n/2&&!G?(i.x=1,l.x=f.x*Math.abs((c.x-n/2-a.x)/n)):a.y<=s.y+p/2&&!T?(i.y=-1,l.y=f.y*Math.abs((a.y-p/2-s.y)/p)):a.x<=s.x+n/2&&!E&&(i.x=-1,l.x=f.x*Math.abs((a.x-n/2-s.x)/n)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(i.x!==0||i.y!==0)&&(this.interval=setInterval(function(){o.isAutoScrolling=!0;var S={left:l.x*i.x,top:l.y*i.y};o.container.scrollTop+=S.top,o.container.scrollLeft+=S.left,o.onScrollCallback(S)},5))}}]),e}();function nr(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}}function rr(e){var t=[ne.Input,ne.Textarea,ne.Select,ne.Option,ne.Button];return!!(t.indexOf(e.target.tagName)!==-1||Ie(e.target,function(r){return r.contentEditable==="true"}))}var Bt={axis:m.default.oneOf(["x","y","xy"]),contentWindow:m.default.any,disableAutoscroll:m.default.bool,distance:m.default.number,getContainer:m.default.func,getHelperDimensions:m.default.func,helperClass:m.default.string,helperContainer:m.default.oneOfType([m.default.func,typeof HTMLElement>"u"?m.default.any:m.default.instanceOf(HTMLElement)]),hideSortableGhost:m.default.bool,keyboardSortingTransitionDuration:m.default.number,lockAxis:m.default.string,lockOffset:m.default.oneOfType([m.default.number,m.default.string,m.default.arrayOf(m.default.oneOfType([m.default.number,m.default.string]))]),lockToContainerEdges:m.default.bool,onSortEnd:m.default.func,onSortMove:m.default.func,onSortOver:m.default.func,onSortStart:m.default.func,pressDelay:m.default.number,pressThreshold:m.default.number,keyCodes:m.default.shape({lift:m.default.arrayOf(m.default.number),drop:m.default.arrayOf(m.default.number),cancel:m.default.arrayOf(m.default.number),up:m.default.arrayOf(m.default.number),down:m.default.arrayOf(m.default.number)}),shouldCancelStart:m.default.func,transitionDuration:m.default.number,updateBeforeSortStart:m.default.func,useDragHandle:m.default.bool,useWindowAsScrollContainer:m.default.bool},Lt={lift:[te.SPACE],drop:[te.SPACE],cancel:[te.ESC],up:[te.UP,te.LEFT],down:[te.DOWN,te.RIGHT]},or={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:nr,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Lt,shouldCancelStart:rr,transitionDuration:300,useWindowAsScrollContainer:!1},ir=Object.keys(Bt);function ar(e){(0,Q.default)(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function sr(e,t){try{var r=e()}catch(o){return t(!0,o)}return r&&r.then?r.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}var Vt=(0,Y.createContext)({manager:{}});function Yt(e){var t,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=t=function(a){_e(s,a);function s(c){var n;le(this,s),n=De(this,ue(s).call(this,c)),A(b(b(n)),"state",{}),A(b(b(n)),"handleStart",function(i){var l=n.props,f=l.distance,u=l.shouldCancelStart;if(!(i.button===2||u(i))){n.touched=!0,n.position=xe(i);var h=Ie(i.target,function(T){return T.sortableInfo!=null});if(h&&h.sortableInfo&&n.nodeIsChild(h)&&!n.state.sorting){var C=n.props.useDragHandle,y=h.sortableInfo,k=y.index,O=y.collection,P=y.disabled;if(P||C&&!Ie(i.target,Dt))return;n.manager.active={collection:O,index:k},!Kn(i)&&i.target.tagName===ne.Anchor&&i.preventDefault(),f||(n.props.pressDelay===0?n.handlePress(i):n.pressTimer=setTimeout(function(){return n.handlePress(i)},n.props.pressDelay))}}}),A(b(b(n)),"nodeIsChild",function(i){return i.sortableInfo.manager===n.manager}),A(b(b(n)),"handleMove",function(i){var l=n.props,f=l.distance,u=l.pressThreshold;if(!n.state.sorting&&n.touched&&!n._awaitingUpdateBeforeSortStart){var h=xe(i),C={x:n.position.x-h.x,y:n.position.y-h.y},y=Math.abs(C.x)+Math.abs(C.y);n.delta=C,!f&&(!u||y>=u)?(clearTimeout(n.cancelTimer),n.cancelTimer=setTimeout(n.cancel,0)):f&&y>=f&&n.manager.isActive()&&n.handlePress(i)}}),A(b(b(n)),"handleEnd",function(){n.touched=!1,n.cancel()}),A(b(b(n)),"cancel",function(){var i=n.props.distance,l=n.state.sorting;l||(i||clearTimeout(n.pressTimer),n.manager.active=null)}),A(b(b(n)),"handlePress",function(i){try{var l=n.manager.getActive(),f=function(){if(l){var u=function(){var N=E.sortableInfo.index,R=Un(E),H=$n(n.container),F=n.scrollContainer.getBoundingClientRect(),$=y({index:N,node:E,collection:G});if(n.node=E,n.margin=R,n.gridGap=H,n.width=$.width,n.height=$.height,n.marginOffset={x:n.margin.left+n.margin.right+n.gridGap.x,y:Math.max(n.margin.top,n.margin.bottom,n.gridGap.y)},n.boundingClientRect=E.getBoundingClientRect(),n.containerBoundingRect=F,n.index=N,n.newIndex=N,n.axis={x:C.indexOf("x")>=0,y:C.indexOf("y")>=0},n.offsetEdge=Be(E,n.container),S?n.initialOffset=xe(ke({},i,{pageX:n.boundingClientRect.left,pageY:n.boundingClientRect.top})):n.initialOffset=xe(i),n.initialScroll={left:n.scrollContainer.scrollLeft,top:n.scrollContainer.scrollTop},n.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},n.helper=n.helperContainer.appendChild(er(E)),je(n.helper,{boxSizing:"border-box",height:"".concat(n.height,"px"),left:"".concat(n.boundingClientRect.left-R.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(n.boundingClientRect.top-R.top,"px"),width:"".concat(n.width,"px")}),S&&n.helper.focus(),O&&(n.sortableGhost=E,je(E,{opacity:0,visibility:"hidden"})),n.minTranslate={},n.maxTranslate={},S){var oe=I?{top:0,left:0,width:n.contentWindow.innerWidth,height:n.contentWindow.innerHeight}:n.containerBoundingRect,Ae=oe.top,Oe=oe.left,ze=oe.width,Ue=oe.height,ie=Ae+Ue,Ke=Oe+ze;n.axis.x&&(n.minTranslate.x=Oe-n.boundingClientRect.left,n.maxTranslate.x=Ke-(n.boundingClientRect.left+n.width)),n.axis.y&&(n.minTranslate.y=Ae-n.boundingClientRect.top,n.maxTranslate.y=ie-(n.boundingClientRect.top+n.height))}else n.axis.x&&(n.minTranslate.x=(I?0:F.left)-n.boundingClientRect.left-n.width/2,n.maxTranslate.x=(I?n.contentWindow.innerWidth:F.left+F.width)-n.boundingClientRect.left-n.width/2),n.axis.y&&(n.minTranslate.y=(I?0:F.top)-n.boundingClientRect.top-n.height/2,n.maxTranslate.y=(I?n.contentWindow.innerHeight:F.top+F.height)-n.boundingClientRect.top-n.height/2);k&&k.split(" ").forEach(function(ee){return n.helper.classList.add(ee)}),n.listenerNode=i.touches?i.target:n.contentWindow,S?(n.listenerNode.addEventListener("wheel",n.handleKeyEnd,!0),n.listenerNode.addEventListener("mousedown",n.handleKeyEnd,!0),n.listenerNode.addEventListener("keydown",n.handleKeyDown)):(fe.move.forEach(function(ee){return n.listenerNode.addEventListener(ee,n.handleSortMove,!1)}),fe.end.forEach(function(ee){return n.listenerNode.addEventListener(ee,n.handleSortEnd,!1)})),n.setState({sorting:!0,sortingIndex:N}),T&&T({node:E,index:N,collection:G,isKeySorting:S,nodes:n.manager.getOrderedRefs(),helper:n.helper},i),S&&n.keyMove(0)},h=n.props,C=h.axis,y=h.getHelperDimensions,k=h.helperClass,O=h.hideSortableGhost,P=h.updateBeforeSortStart,T=h.onSortStart,I=h.useWindowAsScrollContainer,E=l.node,G=l.collection,S=n.manager.isKeySorting,v=function(){if(typeof P=="function"){n._awaitingUpdateBeforeSortStart=!0;var z=sr(function(){var N=E.sortableInfo.index;return Promise.resolve(P({collection:G,index:N,node:E,isKeySorting:S},i)).then(function(){})},function(N,R){if(n._awaitingUpdateBeforeSortStart=!1,N)throw R;return R});if(z&&z.then)return z.then(function(){})}}();return v&&v.then?v.then(u):u(v)}}();return Promise.resolve(f&&f.then?f.then(function(){}):void 0)}catch(u){return Promise.reject(u)}}),A(b(b(n)),"handleSortMove",function(i){var l=n.props.onSortMove;typeof i.preventDefault=="function"&&i.cancelable&&i.preventDefault(),n.updateHelperPosition(i),n.animateNodes(),n.autoscroll(),l&&l(i)}),A(b(b(n)),"handleSortEnd",function(i){var l=n.props,f=l.hideSortableGhost,u=l.onSortEnd,h=n.manager,C=h.active.collection,y=h.isKeySorting,k=n.manager.getOrderedRefs();n.listenerNode&&(y?(n.listenerNode.removeEventListener("wheel",n.handleKeyEnd,!0),n.listenerNode.removeEventListener("mousedown",n.handleKeyEnd,!0),n.listenerNode.removeEventListener("keydown",n.handleKeyDown)):(fe.move.forEach(function(E){return n.listenerNode.removeEventListener(E,n.handleSortMove)}),fe.end.forEach(function(E){return n.listenerNode.removeEventListener(E,n.handleSortEnd)}))),n.helper.parentNode.removeChild(n.helper),f&&n.sortableGhost&&je(n.sortableGhost,{opacity:"",visibility:""});for(var O=0,P=k.length;O<P;O++){var T=k[O],I=T.node;T.edgeOffset=null,T.boundingClientRect=null,Xe(I,null),qe(I,null),T.translate=null}n.autoScroller.clear(),n.manager.active=null,n.manager.isKeySorting=!1,n.setState({sorting:!1,sortingIndex:null}),typeof u=="function"&&u({collection:C,newIndex:n.newIndex,oldIndex:n.index,isKeySorting:y,nodes:k},i),n.touched=!1}),A(b(b(n)),"autoscroll",function(){var i=n.props.disableAutoscroll,l=n.manager.isKeySorting;if(i){n.autoScroller.clear();return}if(l){var f=ke({},n.translate),u=0,h=0;n.axis.x&&(f.x=Math.min(n.maxTranslate.x,Math.max(n.minTranslate.x,n.translate.x)),u=n.translate.x-f.x),n.axis.y&&(f.y=Math.min(n.maxTranslate.y,Math.max(n.minTranslate.y,n.translate.y)),h=n.translate.y-f.y),n.translate=f,Xe(n.helper,n.translate),n.scrollContainer.scrollLeft+=u,n.scrollContainer.scrollTop+=h;return}n.autoScroller.update({height:n.height,maxTranslate:n.maxTranslate,minTranslate:n.minTranslate,translate:n.translate,width:n.width})}),A(b(b(n)),"onAutoScroll",function(i){n.translate.x+=i.left,n.translate.y+=i.top,n.animateNodes()}),A(b(b(n)),"handleKeyDown",function(i){var l=i.keyCode,f=n.props,u=f.shouldCancelStart,h=f.keyCodes,C=h===void 0?{}:h,y=ke({},Lt,C);n.manager.active&&!n.manager.isKeySorting||!n.manager.active&&(!y.lift.includes(l)||u(i)||!n.isValidSortingTarget(i))||(i.stopPropagation(),i.preventDefault(),y.lift.includes(l)&&!n.manager.active?n.keyLift(i):y.drop.includes(l)&&n.manager.active?n.keyDrop(i):y.cancel.includes(l)?(n.newIndex=n.manager.active.index,n.keyDrop(i)):y.up.includes(l)?n.keyMove(-1):y.down.includes(l)&&n.keyMove(1))}),A(b(b(n)),"keyLift",function(i){var l=i.target,f=Ie(l,function(y){return y.sortableInfo!=null}),u=f.sortableInfo,h=u.index,C=u.collection;n.initialFocusedNode=l,n.manager.isKeySorting=!0,n.manager.active={index:h,collection:C},n.handlePress(i)}),A(b(b(n)),"keyMove",function(i){var l=n.manager.getOrderedRefs(),f=l[l.length-1].node.sortableInfo.index,u=n.newIndex+i,h=n.newIndex;if(!(u<0||u>f)){n.prevIndex=h,n.newIndex=u;var C=Jn(n.newIndex,n.prevIndex,n.index),y=l.find(function(S){var v=S.node;return v.sortableInfo.index===C}),k=y.node,O=n.containerScrollDelta,P=y.boundingClientRect||Qe(k,O),T=y.translate||{x:0,y:0},I={top:P.top+T.y-O.top,left:P.left+T.x-O.left},E=h<u,G={x:E&&n.axis.x?k.offsetWidth-n.width:0,y:E&&n.axis.y?k.offsetHeight-n.height:0};n.handleSortMove({pageX:I.left+G.x,pageY:I.top+G.y,ignoreTransition:i===0})}}),A(b(b(n)),"keyDrop",function(i){n.handleSortEnd(i),n.initialFocusedNode&&n.initialFocusedNode.focus()}),A(b(b(n)),"handleKeyEnd",function(i){n.manager.active&&n.keyDrop(i)}),A(b(b(n)),"isValidSortingTarget",function(i){var l=n.props.useDragHandle,f=i.target,u=Ie(f,function(h){return h.sortableInfo!=null});return u&&u.sortableInfo&&!u.sortableInfo.disabled&&(l?Dt(f):f.sortableInfo)});var p=new Mn;return ar(c),n.manager=p,n.wrappedInstance=(0,Y.createRef)(),n.sortableContextValue={manager:p},n.events={end:n.handleEnd,move:n.handleMove,start:n.handleStart},n}return ce(s,[{key:"componentDidMount",value:function(){var n=this,p=this.props.useWindowAsScrollContainer,i=this.getContainer();Promise.resolve(i).then(function(l){n.container=l,n.document=n.container.ownerDocument||document;var f=n.props.contentWindow||n.document.defaultView||window;n.contentWindow=typeof f=="function"?f():f,n.scrollContainer=p?n.document.scrollingElement||n.document.documentElement:jt(n.container)||n.container,n.autoScroller=new tr(n.scrollContainer,n.onAutoScroll),Object.keys(n.events).forEach(function(u){return fe[u].forEach(function(h){return n.container.addEventListener(h,n.events[u],!1)})}),n.container.addEventListener("keydown",n.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var n=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(p){return fe[p].forEach(function(i){return n.container.removeEventListener(i,n.events[p])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(n){var p=this.props,i=p.lockAxis,l=p.lockOffset,f=p.lockToContainerEdges,u=p.transitionDuration,h=p.keyboardSortingTransitionDuration,C=h===void 0?u:h,y=this.manager.isKeySorting,k=n.ignoreTransition,O=xe(n),P={x:O.x-this.initialOffset.x,y:O.y-this.initialOffset.y};if(P.y-=window.pageYOffset-this.initialWindowScroll.top,P.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=P,f){var T=qn({height:this.height,lockOffset:l,width:this.width}),I=Je(T,2),E=I[0],G=I[1],S={x:this.width/2-E.x,y:this.height/2-E.y},v={x:this.width/2-G.x,y:this.height/2-G.y};P.x=Pt(this.minTranslate.x+S.x,this.maxTranslate.x-v.x,P.x),P.y=Pt(this.minTranslate.y+S.y,this.maxTranslate.y-v.y,P.y)}i==="x"?P.y=0:i==="y"&&(P.x=0),y&&C&&!k&&qe(this.helper,C),Xe(this.helper,P)}},{key:"animateNodes",value:function(){var n=this.props,p=n.transitionDuration,i=n.hideSortableGhost,l=n.onSortOver,f=this.containerScrollDelta,u=this.windowScrollDelta,h=this.manager.getOrderedRefs(),C={left:this.offsetEdge.left+this.translate.x+f.left,top:this.offsetEdge.top+this.translate.y+f.top},y=this.manager.isKeySorting,k=this.newIndex;this.newIndex=null;for(var O=0,P=h.length;O<P;O++){var T=h[O].node,I=T.sortableInfo.index,E=T.offsetWidth,G=T.offsetHeight,S={height:this.height>G?G/2:this.height/2,width:this.width>E?E/2:this.width/2},v=y&&I>this.index&&I<=k,z=y&&I<this.index&&I>=k,N={x:0,y:0},R=h[O].edgeOffset;R||(R=Be(T,this.container),h[O].edgeOffset=R,y&&(h[O].boundingClientRect=Qe(T,f)));var H=O<h.length-1&&h[O+1],F=O>0&&h[O-1];if(H&&!H.edgeOffset&&(H.edgeOffset=Be(H.node,this.container),y&&(H.boundingClientRect=Qe(H.node,f))),I===this.index){i&&(this.sortableGhost=T,je(T,{opacity:0,visibility:"hidden"}));continue}p&&qe(T,p),this.axis.x?this.axis.y?z||I<this.index&&(C.left+u.left-S.width<=R.left&&C.top+u.top<=R.top+S.height||C.top+u.top+S.height<=R.top)?(N.x=this.width+this.marginOffset.x,R.left+N.x>this.containerBoundingRect.width-S.width&&H&&(N.x=H.edgeOffset.left-R.left,N.y=H.edgeOffset.top-R.top),this.newIndex===null&&(this.newIndex=I)):(v||I>this.index&&(C.left+u.left+S.width>=R.left&&C.top+u.top+S.height>=R.top||C.top+u.top+S.height>=R.top+G))&&(N.x=-(this.width+this.marginOffset.x),R.left+N.x<this.containerBoundingRect.left+S.width&&F&&(N.x=F.edgeOffset.left-R.left,N.y=F.edgeOffset.top-R.top),this.newIndex=I):v||I>this.index&&C.left+u.left+S.width>=R.left?(N.x=-(this.width+this.marginOffset.x),this.newIndex=I):(z||I<this.index&&C.left+u.left<=R.left+S.width)&&(N.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=I)):this.axis.y&&(v||I>this.index&&C.top+u.top+S.height>=R.top?(N.y=-(this.height+this.marginOffset.y),this.newIndex=I):(z||I<this.index&&C.top+u.top<=R.top+S.height)&&(N.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=I))),Xe(T,N),h[O].translate=N}this.newIndex==null&&(this.newIndex=this.index),y&&(this.newIndex=k);var $=y?this.prevIndex:k;l&&this.newIndex!==$&&l({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:$,isKeySorting:y,nodes:h,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return(0,Q.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var n=this.props.getContainer;return typeof n!="function"?(0,Le.findDOMNode)(this):n(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var n=o.withRef?this.wrappedInstance:null;return(0,Y.createElement)(Vt.Provider,{value:this.sortableContextValue},(0,Y.createElement)(e,se({ref:n},Wt(this.props,ir))))}},{key:"helperContainer",get:function(){var n=this.props.helperContainer;return typeof n=="function"?n():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var n=this.props.useWindowAsScrollContainer;return n?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(Y.Component),A(t,"displayName",$e("sortableList",e)),A(t,"defaultProps",or),A(t,"propTypes",Bt),r}var Ht={index:m.default.number.isRequired,collection:m.default.oneOfType([m.default.number,m.default.string]),disabled:m.default.bool},lr=Object.keys(Ht);function Ft(e){var t,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=t=function(a){_e(s,a);function s(){var c,n;le(this,s);for(var p=arguments.length,i=new Array(p),l=0;l<p;l++)i[l]=arguments[l];return n=De(this,(c=ue(s)).call.apply(c,[this].concat(i))),A(b(b(n)),"wrappedInstance",(0,Y.createRef)()),n}return ce(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(n){this.node&&(n.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),n.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),n.collection!==this.props.collection&&(this.unregister(n.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var n=this.props,p=n.collection,i=n.disabled,l=n.index,f=(0,Le.findDOMNode)(this);f.sortableInfo={collection:p,disabled:i,index:l,manager:this.context.manager},this.node=f,this.ref={node:f},this.context.manager.add(p,this.ref)}},{key:"unregister",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(n,this.ref)}},{key:"getWrappedInstance",value:function(){return(0,Q.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var n=o.withRef?this.wrappedInstance:null;return(0,Y.createElement)(e,se({ref:n},Wt(this.props,lr)))}}]),s}(Y.Component),A(t,"displayName",$e("sortableElement",e)),A(t,"contextType",Vt),A(t,"propTypes",Ht),A(t,"defaultProps",{collection:0}),r}var Ve=V(be()),cr=Ft(({value:e})=>we.default.createElement("div",null,e)),ur=Yt(({children:e})=>we.default.createElement("div",null,e));function Ye(e){let{onSortEndAction:t,element:r,items:o}=e;return we.default.createElement(ur,{onSortEnd:t,useDragHandle:!0,axis:"y",lockAxis:"y"},o.map((a,s)=>we.default.createElement(cr,{key:`item-${s}`,index:s,collection:"zzzz",value:r(s)})))}Ye.propTypes={items:Ve.default.array.isRequired,onSortEndAction:Ve.default.func.isRequired,element:Ve.default.func.isRequired};var un=V(ye()),L=V(be()),fn=V(et()),ct=V(cn()),Eo=window["@Neos:HostPluginAPI"]["@NeosProjectPackages"]().NeosUiEditors.EditorEnvelope;function dn(e){function t(o,a){let{commit:s,id:c,property:n,hooksRegistry:p}=e;if(a){Object.keys(a).map(i=>{p.get(i)(o,a[i]).then(f=>{let u=(0,ct.default)(f,["__type"]);s(c,n,u)})});return}s(c,n,o)}let r=(0,ct.default)(e,["commit"]);return un.default.createElement(Eo,{commit:t,options:r.editorOptions?r.editorOptions:{},...r})}dn.propTypes={identifier:L.default.string.isRequired,label:L.default.string.isRequired,options:L.default.object,value:L.default.any,renderSecondaryInspector:L.default.func,editor:L.default.string.isRequired,editorRegistry:L.default.object.isRequired,i18nRegistry:L.default.object.isRequired,validationErrors:L.default.array,onEnterKey:L.default.func,helpMessage:L.default.string,helpThumbnail:L.default.string,highlight:L.default.bool,property:L.default.string.isRequired,id:L.default.number.isRequired,commit:L.default.func.isRequired};var Ro=(0,fn.neos)(e=>({hooksRegistry:e.get("inspector").get("saveHooks")})),pn=Ro(dn);var Sn=V(gn()),An=V(yn()),On=V(et()),M=V(vn());var Z={group:"mireo91-repeatablefields-xY17aG-group",simpleWrapper:"mireo91-repeatablefields-xY17aG-simpleWrapper",property:"mireo91-repeatablefields-xY17aG-property",loading:"mireo91-repeatablefields-xY17aG-loading",buttons:"mireo91-repeatablefields-xY17aG-buttons",wrapper:"mireo91-repeatablefields-xY17aG-wrapper",move:"mireo91-repeatablefields-xY17aG-move",delete:"mireo91-repeatablefields-xY17aG-delete",simpleButtons:"mireo91-repeatablefields-xY17aG-simpleButtons"};function No(e,t,r){let o=t<0?e.length+t:t;if(o>=0&&o<e.length){let a=r<0?e.length+r:r,[s]=e.splice(t,1);e.splice(a,0,s)}}function xn(e,t,r){return e=[...e],No(e,t,r),e}U();var In=X("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:Pa}=X("NeosProjectPackages")().NeosUiBackendConnector;function wn(e,t,r){return e=Po(e),ut(r,t,e)}function Cn(e){return typeof e=="number"?!0:typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}function Se(e,t){let r={...e};for(let o in t)o in t&&(t[o]instanceof Object&&r[o]instanceof Object?r[o]=Se(r[o],t[o]):r[o]=t[o]);return r}function Po(e){return Array.isArray(e)?e:typeof e=="number"?[e]:e.split(".").map(t=>{let r=parseInt(t);return!isNaN(r)&&String(r)===t?r:t})}function ut(e,t,r){if(r.length===0)return t;if(typeof e>"u"&&(typeof r[0]=="number"?e=[]:e={}),Array.isArray(e)){typeof r[0]=="number"&&e.length<r[0]&&(r[0]=e.length);let o=[...e];return o[r[0]]=ut(e[r[0]],t,r.slice(1)),o}return Object.assign({},e,{[r[0]]:ut(e[r[0]],t,r.slice(1))})}var ko=e=>({contextNodePath:e.focusedNodePath,dataSourceIdentifier:e.options.dataSourceIdentifier,dataSourceUri:e.options.dataSourceUri,dataSourceAdditionalData:e.options.dataSourceAdditionalData,dataSourceDisableCaching:!!e.options.dataSourceDisableCaching});function Gn(e){let{commit:t,dataSourcesDataLoader:r,editorRegistry:o,i18nRegistry:a,id:s,validatorRegistry:c,value:n,renderHelpIcon:p}=e,{dataSourceIdentifier:i,dataSourceUri:l,dataSourceAdditionalData:f}=e.options,u=!!(i||l),h=a.translate(e.label),[C,y]=(0,x.useState)(!0),[k,O]=(0,x.useState)({}),[P,T]=(0,x.useState)(!0),[I,E]=(0,x.useState)(!0),[G,S]=(0,x.useState)([]),[v,z]=(0,x.useState)(u?null:e.options),[N,R]=(0,x.useState)({}),H=()=>JSON.stringify(G),[F,$]=(0,x.useState)([]);(0,x.useEffect)(()=>{y(!0),In.get().endpoints.dataSource("get-property-types",null,{}).then(d=>{O(d),y(!1)})},[]),(0,x.useEffect)(()=>{let d=H();F===d||!v||($(d),Ke(G),ee(G))},[G]),(0,x.useEffect)(()=>{if(!v)return;let d=ze();R(d),Ue(d)},[v,k]);let oe=()=>JSON.stringify({dataSourceIdentifier:i,dataSourceUri:l,dataSourceAdditionalData:f}),[Ae,Oe]=(0,x.useState)(null);(0,x.useEffect)(()=>{if(!u)return;let d=oe();Ae!==d&&(y(!0),Oe(d),r.resolveValue(ko(e),G).then(g=>{z(Se(e.options,g)),y(!1)}))},[i,l,f]);function ze(){let d={},g=v.properties;return g&&Object.entries(g).forEach(([D,W])=>{let _=W&&W.defaultValue;d[D]=Ge(_,"")}),d}function Ue(d){let g=n?[...n]:[],{min:D,max:W}=v;if(D&&g.length<D)for(var _=0;_<D;++_)g[_]?g[_]=n[_]:g[_]=d;if(W&&g.length>W&&(g=g.slice(0,W)),g.length)for(let j=0;j<g.length;j++){let q=v.predefinedProperties?.[j]?.properties,B={...g[j]},ae=Object.keys(B).filter(me=>me in d).reduce((me,Ee)=>{let Re=q?.[Ee]?.defaultValue!=null?q[Ee].defaultValue:B[Ee];return Cn(Re)&&(Re=parseFloat(Re)),{...me,[Ee]:Re}},{});g[j]=ae}S(g)}function ie(d){t(d),S(d)}function Ke(d){v&&v.max&&T(v.max>d.length)}function ee(d){v&&v.min&&E(v.min<d.length)}function En(){ie([...G,N])}function ft(d){let g=G.filter((D,W)=>d!==W);ie(g)}function Rn(d,g,D){ie(wn(g,D,G))}function Nn(d,g,D,W){if(!g||!g.validation)return;let _=g.validation,q=Object.keys(_).map(B=>{let Te=_[B];return Pn(d,B,Te)}).filter(B=>B);return v.controls&&v.controls.add&&T(q.length<=0),q}function Pn(d,g,D){let W=c.get(g);if(W)return W(d,D);console.warn(`Validator ${g} not found`)}function kn(d){let g=!!v.predefinedProperties&&v.predefinedProperties[d],{controls:D}=v,W=Xt(()=>x.default.createElement("span",{type:"button",className:Z.move},x.default.createElement(M.Icon,{icon:"sort"})));return Object.keys(v.properties).length===1?x.default.createElement("div",{className:Z.simpleWrapper},dt(d),x.default.createElement("div",{class:Z.simpleButtons},!g&&v.controls.remove&&I&&x.default.createElement(M.IconButton,{onClick:()=>ft(d),className:Z.delete,icon:"trash"}),!g&&v.controls.move&&G.length>1&&x.default.createElement(W,null))):x.default.createElement("div",{className:Z.wrapper},x.default.createElement("div",{class:Z.buttons},!g&&D&&D.move&&G.length>1&&x.default.createElement(W,null),!g&&D&&D.remove&&I&&x.default.createElement(M.IconButton,{onClick:()=>ft(d),className:Z.delete,icon:"trash"})),dt(d))}function dt(d){let{predefinedProperties:g}=v,D=g&&g[d]?g[d].label:null,W=[];return Object.keys(N).map(_=>{W.push(Dn(_,d))}),x.default.createElement("div",{className:Z.group},D&&x.default.createElement("span",{dangerouslySetInnerHTML:{__html:D}}),W)}function pt(d){return d!=null}function Ge(d,g=""){return pt(d)?d:g}function Dn(d,g){let D=[...G],{properties:W,predefinedProperties:_}=v,j=W[d];_&&_[g]&&_[g].properties&&_[g].properties[d]&&(j=Se(j,_[g].properties[d]));let q=j.type?k[j.type]:{};q&&(j=Se(q,j));let B=Ge(j.editorOptions,{}),Te=Ge(j.editor,"Neos.Neos/Inspector/Editors/TextFieldEditor"),ae=Ge(D[g][d]);!ae&&pt(j.defaultValue)&&(ae=j.defaultValue),(B.hasOwnProperty("dataSourceUri")||B.hasOwnProperty("dataSourceIdentifier"))&&(B={...B},B.dataSourceAdditionalData?(B.dataSourceAdditionalData.hasOwnProperty("repeatableIndex")&&(B.dataSourceAdditionalData.repeatableIndex=g),B.dataSourceAdditionalData.hasOwnProperty("repeatableValue")&&(B.dataSourceAdditionalData.repeatableValue=G)):B.dataSourceAdditionalData={});let me=Object.keys(W).length<=1;return x.default.createElement("div",{className:!me&&Z.property,hidden:j.hidden},x.default.createElement(pn,{identifier:`repeatable-${g}-${d}`,options:B,value:ae,renderSecondaryInspector:e.renderSecondaryInspector,editor:Te,editorRegistry:o,i18nRegistry:a,validationErrors:Nn(ae,j,g,d),highlight:!1,property:`${g}.${d}`,id:`repeatable-${g}-${d}`,commit:Rn,...j}))}function Wn({oldIndex:d,newIndex:g}){ie(xn(G,d,g))}if(C||!v)return x.default.createElement(x.default.Fragment,null,x.default.createElement(M.Label,{htmlFor:s},h," ",p()),x.default.createElement("div",{id:s,className:Z.loading,title:a.translate("Neos.Neos:Main:loading")},x.default.createElement(M.Icon,{icon:"spinner",size:"lg",spin:!0})));if(v.hidden)return null;let{buttonAddLabel:_n="Mireo.RepeatableFields:Main:addRow"}=v;return x.default.createElement(x.default.Fragment,null,x.default.createElement(M.Label,{htmlFor:s},h," ",p()),x.default.createElement(Ye,{element:kn,items:G,onSortEndAction:Wn}),v.controls.add&&P&&x.default.createElement(M.Button,{onClick:En},a.translate(_n)))}Gn.propTypes={identifier:w.default.string.isRequired,label:w.default.string.isRequired,value:w.default.arrayOf(w.default.object),renderSecondaryInspector:w.default.func,editor:w.default.string.isRequired,editorRegistry:w.default.object.isRequired,i18nRegistry:w.default.object.isRequired,validationErrors:w.default.array,onEnterKey:w.default.func,helpMessage:w.default.string,helpThumbnail:w.default.string,highlight:w.default.bool,commit:w.default.func.isRequired,options:w.default.shape({hidden:w.default.bool,buttonAddLabel:w.default.string,dataSourceIdentifier:w.default.string,dataSourceUri:w.default.string,dataSourceDisableCaching:w.default.bool,dataSourceAdditionalData:w.default.objectOf(w.default.any),predefinedProperties:w.default.arrayOf(w.default.shape({label:w.default.string,value:w.default.object})),max:w.default.number,min:w.default.number,controls:w.default.shape({move:w.default.bool,remove:w.default.bool,add:w.default.bool})}).isRequired,dataSourcesDataLoader:w.default.shape({resolveValue:w.default.func.isRequired}).isRequired,focusedNodePath:w.default.string.isRequired};var Do=(0,On.neos)(e=>({editorRegistry:e.get("inspector").get("editors"),i18nRegistry:e.get("i18n"),dataSourcesDataLoader:e.get("dataLoaders").get("DataSources")})),Wo=(0,Sn.connect)(e=>({focusedNodePath:An.selectors.CR.Nodes.focusedNodePathSelector(e)})),Tn=Do(Wo(Gn));mt("Mireo.RepeatableFields:RepeatableField",{},e=>{e.get("inspector").get("editors").set("Mireo.RepeatableFields/Inspector/Editors/RepeatableFieldEditor",{component:Tn,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
